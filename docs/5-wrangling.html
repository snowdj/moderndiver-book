<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>An Introduction to Statistical and Data Sciences via R</title>
  <meta name="description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="An Introduction to Statistical and Data Sciences via R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://moderndive.com/" />
  <meta property="og:image" content="http://moderndive.com/images/logos/book_cover.png" />
  <meta property="og:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="github-repo" content="moderndive/moderndive_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="An Introduction to Statistical and Data Sciences via R" />
  
  <meta name="twitter:description" content="An open-source and fully-reproducible electronic textbook bridging the gap between traditional introductory statistics and data science courses." />
  <meta name="twitter:image" content="http://moderndive.com/images/logos/book_cover.png" />

<meta name="author" content="Chester Ismay and Albert Y. Kim">


<meta name="date" content="2018-07-17">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/logos/favicons/apple-touch-icon.png">
  <link rel="shortcut icon" href="images/logos/favicons/favicon.ico" type="image/x-icon">
<link rel="prev" href="4-tidy.html">
<link rel="next" href="6-regression.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.5/dygraphs.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89938436-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#sec:intro-for-students"><i class="fa fa-check"></i><b>1.1</b> Introduction for students</a><ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#subsec:learning-goals"><i class="fa fa-check"></i><b>1.1.1</b> What you will learn from this book</a></li>
<li class="chapter" data-level="1.1.2" data-path="index.html"><a href="index.html#subsec:pipeline"><i class="fa fa-check"></i><b>1.1.2</b> Data/science pipeline</a></li>
<li class="chapter" data-level="1.1.3" data-path="index.html"><a href="index.html#subsec:reproducible"><i class="fa fa-check"></i><b>1.1.3</b> Reproducible research</a></li>
<li class="chapter" data-level="1.1.4" data-path="index.html"><a href="index.html#final-note-for-students"><i class="fa fa-check"></i><b>1.1.4</b> Final note for students</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#sec:intro-instructors"><i class="fa fa-check"></i><b>1.2</b> Introduction for instructors</a><ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#who-is-this-book-for"><i class="fa fa-check"></i><b>1.2.1</b> Who is this book for?</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#datacamp"><i class="fa fa-check"></i><b>1.3</b> DataCamp</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#sec:connect-contribute"><i class="fa fa-check"></i><b>1.4</b> Connect and contribute</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#sec:about-book"><i class="fa fa-check"></i><b>1.5</b> About this book</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#sec:about-authors"><i class="fa fa-check"></i><b>1.6</b> About the authors</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-getting-started.html"><a href="2-getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started with Data in R</a><ul>
<li class="chapter" data-level="2.1" data-path="2-getting-started.html"><a href="2-getting-started.html#what-are-r-and-rstudio"><i class="fa fa-check"></i><b>2.1</b> What are R and RStudio?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-getting-started.html"><a href="2-getting-started.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>2.1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-getting-started.html"><a href="2-getting-started.html#using-r-via-rstudio"><i class="fa fa-check"></i><b>2.1.2</b> Using R via RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-getting-started.html"><a href="2-getting-started.html#code"><i class="fa fa-check"></i><b>2.2</b> How do I code in R?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="2-getting-started.html"><a href="2-getting-started.html#programming-concepts"><i class="fa fa-check"></i><b>2.2.1</b> Basic programming concepts and terminology</a></li>
<li class="chapter" data-level="2.2.2" data-path="2-getting-started.html"><a href="2-getting-started.html#tips-on-learning-to-code"><i class="fa fa-check"></i><b>2.2.2</b> Tips on learning to code</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-getting-started.html"><a href="2-getting-started.html#packages"><i class="fa fa-check"></i><b>2.3</b> What are R packages?</a><ul>
<li class="chapter" data-level="2.3.1" data-path="2-getting-started.html"><a href="2-getting-started.html#package-installation"><i class="fa fa-check"></i><b>2.3.1</b> Package installation</a></li>
<li class="chapter" data-level="2.3.2" data-path="2-getting-started.html"><a href="2-getting-started.html#package-loading"><i class="fa fa-check"></i><b>2.3.2</b> Package loading</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-getting-started.html"><a href="2-getting-started.html#nycflights13"><i class="fa fa-check"></i><b>2.4</b> Explore your first dataset</a><ul>
<li class="chapter" data-level="2.4.1" data-path="2-getting-started.html"><a href="2-getting-started.html#nycflights13-package"><i class="fa fa-check"></i><b>2.4.1</b> nycflights13 package</a></li>
<li class="chapter" data-level="2.4.2" data-path="2-getting-started.html"><a href="2-getting-started.html#flights-data-frame"><i class="fa fa-check"></i><b>2.4.2</b> flights data frame</a></li>
<li class="chapter" data-level="2.4.3" data-path="2-getting-started.html"><a href="2-getting-started.html#exploredataframes"><i class="fa fa-check"></i><b>2.4.3</b> Exploring data frames</a></li>
<li class="chapter" data-level="2.4.4" data-path="2-getting-started.html"><a href="2-getting-started.html#help-files"><i class="fa fa-check"></i><b>2.4.4</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="2-getting-started.html"><a href="2-getting-started.html#conclusion"><i class="fa fa-check"></i><b>2.5</b> Conclusion</a><ul>
<li class="chapter" data-level="2.5.1" data-path="2-getting-started.html"><a href="2-getting-started.html#whats-to-come"><i class="fa fa-check"></i><b>2.5.1</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Data Science via the tidyverse</b></span></li>
<li class="chapter" data-level="3" data-path="3-viz.html"><a href="3-viz.html"><i class="fa fa-check"></i><b>3</b> Data Visualization via ggplot2</a><ul>
<li class="chapter" data-level="" data-path="3-viz.html"><a href="3-viz.html#needed-packages"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#datacamp"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="3.1" data-path="3-viz.html"><a href="3-viz.html#grammarofgraphics"><i class="fa fa-check"></i><b>3.1</b> The Grammar of Graphics</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-viz.html"><a href="3-viz.html#components-of-the-grammar"><i class="fa fa-check"></i><b>3.1.1</b> Components of the Grammar</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-viz.html"><a href="3-viz.html#gapminder"><i class="fa fa-check"></i><b>3.1.2</b> Gapminder</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-viz.html"><a href="3-viz.html#other-components-of-the-grammar"><i class="fa fa-check"></i><b>3.1.3</b> Other components of the Grammar</a></li>
<li class="chapter" data-level="3.1.4" data-path="3-viz.html"><a href="3-viz.html#the-ggplot2-package"><i class="fa fa-check"></i><b>3.1.4</b> The ggplot2 package</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-viz.html"><a href="3-viz.html#FiveNG"><i class="fa fa-check"></i><b>3.2</b> Five Named Graphs - The 5NG</a></li>
<li class="chapter" data-level="3.3" data-path="3-viz.html"><a href="3-viz.html#scatterplots"><i class="fa fa-check"></i><b>3.3</b> 5NG#1: Scatterplots</a><ul>
<li class="chapter" data-level="3.3.1" data-path="3-viz.html"><a href="3-viz.html#geompoint"><i class="fa fa-check"></i><b>3.3.1</b> Scatterplots via geom_point</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-viz.html"><a href="3-viz.html#overplotting"><i class="fa fa-check"></i><b>3.3.2</b> Over-plotting</a></li>
<li class="chapter" data-level="3.3.3" data-path="3-viz.html"><a href="3-viz.html#summary"><i class="fa fa-check"></i><b>3.3.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-viz.html"><a href="3-viz.html#linegraphs"><i class="fa fa-check"></i><b>3.4</b> 5NG#2: Linegraphs</a><ul>
<li class="chapter" data-level="3.4.1" data-path="3-viz.html"><a href="3-viz.html#geomline"><i class="fa fa-check"></i><b>3.4.1</b> Linegraphs via geom_line</a></li>
<li class="chapter" data-level="3.4.2" data-path="3-viz.html"><a href="3-viz.html#summary-1"><i class="fa fa-check"></i><b>3.4.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="3-viz.html"><a href="3-viz.html#histograms"><i class="fa fa-check"></i><b>3.5</b> 5NG#3: Histograms</a><ul>
<li class="chapter" data-level="3.5.1" data-path="3-viz.html"><a href="3-viz.html#geomhistogram"><i class="fa fa-check"></i><b>3.5.1</b> Histograms via geom_histogram</a></li>
<li class="chapter" data-level="3.5.2" data-path="3-viz.html"><a href="3-viz.html#adjustbins"><i class="fa fa-check"></i><b>3.5.2</b> Adjusting the bins</a></li>
<li class="chapter" data-level="3.5.3" data-path="3-viz.html"><a href="3-viz.html#summary-2"><i class="fa fa-check"></i><b>3.5.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="3-viz.html"><a href="3-viz.html#facets"><i class="fa fa-check"></i><b>3.6</b> Facets</a></li>
<li class="chapter" data-level="3.7" data-path="3-viz.html"><a href="3-viz.html#boxplots"><i class="fa fa-check"></i><b>3.7</b> 5NG#4: Boxplots</a><ul>
<li class="chapter" data-level="3.7.1" data-path="3-viz.html"><a href="3-viz.html#geomboxplot"><i class="fa fa-check"></i><b>3.7.1</b> Boxplots via geom_boxplot</a></li>
<li class="chapter" data-level="3.7.2" data-path="3-viz.html"><a href="3-viz.html#summary-3"><i class="fa fa-check"></i><b>3.7.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="3-viz.html"><a href="3-viz.html#geombar"><i class="fa fa-check"></i><b>3.8</b> 5NG#5: Barplots</a><ul>
<li class="chapter" data-level="3.8.1" data-path="3-viz.html"><a href="3-viz.html#barplots-via-geom_bargeom_col"><i class="fa fa-check"></i><b>3.8.1</b> Barplots via geom_bar/geom_col</a></li>
<li class="chapter" data-level="3.8.2" data-path="3-viz.html"><a href="3-viz.html#must-avoid-pie-charts"><i class="fa fa-check"></i><b>3.8.2</b> Must avoid pie charts!</a></li>
<li class="chapter" data-level="3.8.3" data-path="3-viz.html"><a href="3-viz.html#using-barplots-to-compare-two-categorical-variables"><i class="fa fa-check"></i><b>3.8.3</b> Using barplots to compare two categorical variables</a></li>
<li class="chapter" data-level="3.8.4" data-path="3-viz.html"><a href="3-viz.html#summary-4"><i class="fa fa-check"></i><b>3.8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="3-viz.html"><a href="3-viz.html#conclusion-1"><i class="fa fa-check"></i><b>3.9</b> Conclusion</a><ul>
<li class="chapter" data-level="3.9.1" data-path="3-viz.html"><a href="3-viz.html#putting-it-all-together"><i class="fa fa-check"></i><b>3.9.1</b> Putting it all together</a></li>
<li class="chapter" data-level="3.9.2" data-path="3-viz.html"><a href="3-viz.html#review-questions"><i class="fa fa-check"></i><b>3.9.2</b> Review questions</a></li>
<li class="chapter" data-level="3.9.3" data-path="3-viz.html"><a href="3-viz.html#whats-to-come-1"><i class="fa fa-check"></i><b>3.9.3</b> What’s to come?</a></li>
<li class="chapter" data-level="3.9.4" data-path="3-viz.html"><a href="3-viz.html#resources"><i class="fa fa-check"></i><b>3.9.4</b> Resources</a></li>
<li class="chapter" data-level="3.9.5" data-path="3-viz.html"><a href="3-viz.html#script-of-r-code"><i class="fa fa-check"></i><b>3.9.5</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-tidy.html"><a href="4-tidy.html"><i class="fa fa-check"></i><b>4</b> Tidy Data via tidyr</a><ul>
<li class="chapter" data-level="" data-path="4-tidy.html"><a href="4-tidy.html#needed-packages-1"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="4-tidy.html"><a href="4-tidy.html#datacamp-1"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="4.1" data-path="4-tidy.html"><a href="4-tidy.html#what-is-tidy-data"><i class="fa fa-check"></i><b>4.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="4.2" data-path="4-tidy.html"><a href="4-tidy.html#back-to-nycflights13"><i class="fa fa-check"></i><b>4.2</b> Back to nycflights13</a><ul>
<li class="chapter" data-level="4.2.1" data-path="4-tidy.html"><a href="4-tidy.html#observational-units"><i class="fa fa-check"></i><b>4.2.1</b> Observational units</a></li>
<li class="chapter" data-level="4.2.2" data-path="4-tidy.html"><a href="4-tidy.html#identification-vs-measurement"><i class="fa fa-check"></i><b>4.2.2</b> Identification vs measurement variables</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="4-tidy.html"><a href="4-tidy.html#csv"><i class="fa fa-check"></i><b>4.3</b> Importing spreadsheets into R</a><ul>
<li class="chapter" data-level="4.3.1" data-path="4-tidy.html"><a href="4-tidy.html#method-1-from-the-console"><i class="fa fa-check"></i><b>4.3.1</b> Method 1: From the console</a></li>
<li class="chapter" data-level="4.3.2" data-path="4-tidy.html"><a href="4-tidy.html#method-2-using-rstudios-interface"><i class="fa fa-check"></i><b>4.3.2</b> Method 2: Using RStudio’s interface</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="4-tidy.html"><a href="4-tidy.html#tidying"><i class="fa fa-check"></i><b>4.4</b> Converting to “tidy” data format</a></li>
<li class="chapter" data-level="4.5" data-path="4-tidy.html"><a href="4-tidy.html#optional-normal-forms-of-data"><i class="fa fa-check"></i><b>4.5</b> Optional: Normal forms of data</a></li>
<li class="chapter" data-level="4.6" data-path="4-tidy.html"><a href="4-tidy.html#conclusion-2"><i class="fa fa-check"></i><b>4.6</b> Conclusion</a><ul>
<li class="chapter" data-level="4.6.1" data-path="4-tidy.html"><a href="4-tidy.html#review-questions-1"><i class="fa fa-check"></i><b>4.6.1</b> Review questions</a></li>
<li class="chapter" data-level="4.6.2" data-path="4-tidy.html"><a href="4-tidy.html#whats-to-come-2"><i class="fa fa-check"></i><b>4.6.2</b> What’s to come?</a></li>
<li class="chapter" data-level="4.6.3" data-path="4-tidy.html"><a href="4-tidy.html#script-of-r-code-1"><i class="fa fa-check"></i><b>4.6.3</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-wrangling.html"><a href="5-wrangling.html"><i class="fa fa-check"></i><b>5</b> Data Wrangling via dplyr</a><ul>
<li class="chapter" data-level="" data-path="5-wrangling.html"><a href="5-wrangling.html#needed-packages-2"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="5-wrangling.html"><a href="5-wrangling.html#datacamp-2"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="5.1" data-path="5-wrangling.html"><a href="5-wrangling.html#piping"><i class="fa fa-check"></i><b>5.1</b> The pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="5.2" data-path="5-wrangling.html"><a href="5-wrangling.html#five-main-verbs---the-5mv"><i class="fa fa-check"></i><b>5.2</b> Five Main Verbs - The 5MV</a></li>
<li class="chapter" data-level="5.3" data-path="5-wrangling.html"><a href="5-wrangling.html#filter"><i class="fa fa-check"></i><b>5.3</b> 5MV#1: Filter observations using filter</a></li>
<li class="chapter" data-level="5.4" data-path="5-wrangling.html"><a href="5-wrangling.html#summarize"><i class="fa fa-check"></i><b>5.4</b> 5MV#2: Summarize variables using summarize</a></li>
<li class="chapter" data-level="5.5" data-path="5-wrangling.html"><a href="5-wrangling.html#groupby"><i class="fa fa-check"></i><b>5.5</b> 5MV#3: Group rows using group_by</a><ul>
<li class="chapter" data-level="5.5.1" data-path="5-wrangling.html"><a href="5-wrangling.html#grouping-by-more-than-one-variable"><i class="fa fa-check"></i><b>5.5.1</b> Grouping by more than one variable</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="5-wrangling.html"><a href="5-wrangling.html#mv4-create-new-variableschange-old-variables-using-mutate"><i class="fa fa-check"></i><b>5.6</b> 5MV#4: Create new variables/change old variables using mutate</a></li>
<li class="chapter" data-level="5.7" data-path="5-wrangling.html"><a href="5-wrangling.html#arrange"><i class="fa fa-check"></i><b>5.7</b> 5MV#5: Reorder the data frame using arrange</a></li>
<li class="chapter" data-level="5.8" data-path="5-wrangling.html"><a href="5-wrangling.html#joins"><i class="fa fa-check"></i><b>5.8</b> Joining data frames</a><ul>
<li class="chapter" data-level="5.8.1" data-path="5-wrangling.html"><a href="5-wrangling.html#joining-by-key-variables"><i class="fa fa-check"></i><b>5.8.1</b> Joining by “key” variables</a></li>
<li class="chapter" data-level="5.8.2" data-path="5-wrangling.html"><a href="5-wrangling.html#joining-by-key-variables-with-different-names"><i class="fa fa-check"></i><b>5.8.2</b> Joining by “key” variables with different names</a></li>
<li class="chapter" data-level="5.8.3" data-path="5-wrangling.html"><a href="5-wrangling.html#joining-by-multiple-key-variables"><i class="fa fa-check"></i><b>5.8.3</b> Joining by multiple “key” variables</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="5-wrangling.html"><a href="5-wrangling.html#other-verbs"><i class="fa fa-check"></i><b>5.9</b> Other verbs</a><ul>
<li class="chapter" data-level="5.9.1" data-path="5-wrangling.html"><a href="5-wrangling.html#select"><i class="fa fa-check"></i><b>5.9.1</b> Select variables using select</a></li>
<li class="chapter" data-level="5.9.2" data-path="5-wrangling.html"><a href="5-wrangling.html#rename"><i class="fa fa-check"></i><b>5.9.2</b> Rename variables using rename</a></li>
<li class="chapter" data-level="5.9.3" data-path="5-wrangling.html"><a href="5-wrangling.html#find-the-top-number-of-values-using-top_n"><i class="fa fa-check"></i><b>5.9.3</b> Find the top number of values using top_n</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="5-wrangling.html"><a href="5-wrangling.html#conclusion-3"><i class="fa fa-check"></i><b>5.10</b> Conclusion</a><ul>
<li class="chapter" data-level="5.10.1" data-path="5-wrangling.html"><a href="5-wrangling.html#putting-it-all-together-available-seat-miles"><i class="fa fa-check"></i><b>5.10.1</b> Putting it all together: Available seat miles</a></li>
<li class="chapter" data-level="5.10.2" data-path="5-wrangling.html"><a href="5-wrangling.html#review-questions-2"><i class="fa fa-check"></i><b>5.10.2</b> Review questions</a></li>
<li class="chapter" data-level="5.10.3" data-path="5-wrangling.html"><a href="5-wrangling.html#whats-to-come-3"><i class="fa fa-check"></i><b>5.10.3</b> What’s to come?</a></li>
<li class="chapter" data-level="5.10.4" data-path="5-wrangling.html"><a href="5-wrangling.html#resources-1"><i class="fa fa-check"></i><b>5.10.4</b> Resources</a></li>
<li class="chapter" data-level="5.10.5" data-path="5-wrangling.html"><a href="5-wrangling.html#script-of-r-code-2"><i class="fa fa-check"></i><b>5.10.5</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Modeling via moderndive</b></span></li>
<li class="chapter" data-level="6" data-path="6-regression.html"><a href="6-regression.html"><i class="fa fa-check"></i><b>6</b> Basic Regression</a><ul>
<li class="chapter" data-level="" data-path="6-regression.html"><a href="6-regression.html#needed-packages-3"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="6-regression.html"><a href="6-regression.html#datacamp-3"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="6.1" data-path="6-regression.html"><a href="6-regression.html#model1"><i class="fa fa-check"></i><b>6.1</b> One numerical explanatory variable</a><ul>
<li class="chapter" data-level="6.1.1" data-path="6-regression.html"><a href="6-regression.html#model1EDA"><i class="fa fa-check"></i><b>6.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-regression.html"><a href="6-regression.html#model1table"><i class="fa fa-check"></i><b>6.1.2</b> Simple linear regression</a></li>
<li class="chapter" data-level="6.1.3" data-path="6-regression.html"><a href="6-regression.html#model1points"><i class="fa fa-check"></i><b>6.1.3</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="6.1.4" data-path="6-regression.html"><a href="6-regression.html#model1residuals"><i class="fa fa-check"></i><b>6.1.4</b> Residual analysis</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-regression.html"><a href="6-regression.html#model2"><i class="fa fa-check"></i><b>6.2</b> One categorical explanatory variable</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-regression.html"><a href="6-regression.html#model2EDA"><i class="fa fa-check"></i><b>6.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-regression.html"><a href="6-regression.html#model2table"><i class="fa fa-check"></i><b>6.2.2</b> Linear regression</a></li>
<li class="chapter" data-level="6.2.3" data-path="6-regression.html"><a href="6-regression.html#model2points"><i class="fa fa-check"></i><b>6.2.3</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="6.2.4" data-path="6-regression.html"><a href="6-regression.html#model2residuals"><i class="fa fa-check"></i><b>6.2.4</b> Residual analysis</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-regression.html"><a href="6-regression.html#related-topics"><i class="fa fa-check"></i><b>6.3</b> Related topics</a><ul>
<li class="chapter" data-level="6.3.1" data-path="6-regression.html"><a href="6-regression.html#correlationcoefficient"><i class="fa fa-check"></i><b>6.3.1</b> Correlation coefficient</a></li>
<li class="chapter" data-level="6.3.2" data-path="6-regression.html"><a href="6-regression.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>6.3.2</b> Correlation is not necessarily causation</a></li>
<li class="chapter" data-level="6.3.3" data-path="6-regression.html"><a href="6-regression.html#leastsquares"><i class="fa fa-check"></i><b>6.3.3</b> Best fitting line</a></li>
<li class="chapter" data-level="6.3.4" data-path="6-regression.html"><a href="6-regression.html#underthehood"><i class="fa fa-check"></i><b>6.3.4</b> <code>get_regression_x()</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="6-regression.html"><a href="6-regression.html#conclusion-4"><i class="fa fa-check"></i><b>6.4</b> Conclusion</a><ul>
<li class="chapter" data-level="6.4.1" data-path="6-regression.html"><a href="6-regression.html#script-of-r-code-3"><i class="fa fa-check"></i><b>6.4.1</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html"><i class="fa fa-check"></i><b>7</b> Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#needed-packages-4"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#datacamp-4"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="7.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3"><i class="fa fa-check"></i><b>7.1</b> Two numerical explanatory variables</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3EDA"><i class="fa fa-check"></i><b>7.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3table"><i class="fa fa-check"></i><b>7.1.2</b> Multiple regression</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3points"><i class="fa fa-check"></i><b>7.1.3</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="7.1.4" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model3residuals"><i class="fa fa-check"></i><b>7.1.4</b> Residual analysis</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4"><i class="fa fa-check"></i><b>7.2</b> One numerical &amp; one categorical explanatory variable</a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4EDA"><i class="fa fa-check"></i><b>7.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4table"><i class="fa fa-check"></i><b>7.2.2</b> Multiple regression: Parallel slopes model</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4interactiontable"><i class="fa fa-check"></i><b>7.2.3</b> Multiple regression: Interaction model</a></li>
<li class="chapter" data-level="7.2.4" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4points"><i class="fa fa-check"></i><b>7.2.4</b> Observed/fitted values and residuals</a></li>
<li class="chapter" data-level="7.2.5" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#model4residuals"><i class="fa fa-check"></i><b>7.2.5</b> Residual analysis</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#related-topics-1"><i class="fa fa-check"></i><b>7.3</b> Related topics</a><ul>
<li class="chapter" data-level="7.3.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#correlationcoefficient2"><i class="fa fa-check"></i><b>7.3.1</b> More on the correlation coefficient</a></li>
<li class="chapter" data-level="7.3.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#simpsonsparadox"><i class="fa fa-check"></i><b>7.3.2</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#conclusion-5"><i class="fa fa-check"></i><b>7.4</b> Conclusion</a><ul>
<li class="chapter" data-level="7.4.1" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#whats-to-come-4"><i class="fa fa-check"></i><b>7.4.1</b> What’s to come?</a></li>
<li class="chapter" data-level="7.4.2" data-path="7-multiple-regression.html"><a href="7-multiple-regression.html#script-of-r-code-4"><i class="fa fa-check"></i><b>7.4.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Inference via infer</b></span></li>
<li class="chapter" data-level="8" data-path="8-sampling.html"><a href="8-sampling.html"><i class="fa fa-check"></i><b>8</b> Sampling</a><ul>
<li class="chapter" data-level="" data-path="8-sampling.html"><a href="8-sampling.html#needed-packages-5"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="8.1" data-path="8-sampling.html"><a href="8-sampling.html#introduction-to-sampling"><i class="fa fa-check"></i><b>8.1</b> Introduction to sampling</a><ul>
<li class="chapter" data-level="" data-path="8-sampling.html"><a href="8-sampling.html#concepts-related-to-sampling"><i class="fa fa-check"></i>Concepts related to sampling</a></li>
<li class="chapter" data-level="" data-path="8-sampling.html"><a href="8-sampling.html#inference-via-sampling"><i class="fa fa-check"></i>Inference via sampling</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-sampling.html"><a href="8-sampling.html#tactile"><i class="fa fa-check"></i><b>8.2</b> Tactile sampling simulation</a><ul>
<li class="chapter" data-level="8.2.1" data-path="8-sampling.html"><a href="8-sampling.html#using-shovel-once"><i class="fa fa-check"></i><b>8.2.1</b> Using shovel once</a></li>
<li class="chapter" data-level="8.2.2" data-path="8-sampling.html"><a href="8-sampling.html#student-shovels"><i class="fa fa-check"></i><b>8.2.2</b> Using shovel 33 times</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="8-sampling.html"><a href="8-sampling.html#virtual"><i class="fa fa-check"></i><b>8.3</b> Virtual sampling simulation</a><ul>
<li class="chapter" data-level="8.3.1" data-path="8-sampling.html"><a href="8-sampling.html#using-shovel-once-1"><i class="fa fa-check"></i><b>8.3.1</b> Using shovel once</a></li>
<li class="chapter" data-level="8.3.2" data-path="8-sampling.html"><a href="8-sampling.html#using-shovel-33-times"><i class="fa fa-check"></i><b>8.3.2</b> Using shovel 33 times</a></li>
<li class="chapter" data-level="8.3.3" data-path="8-sampling.html"><a href="8-sampling.html#using-shovel-1000-times"><i class="fa fa-check"></i><b>8.3.3</b> Using shovel 1000 times</a></li>
<li class="chapter" data-level="8.3.4" data-path="8-sampling.html"><a href="8-sampling.html#using-different-shovels"><i class="fa fa-check"></i><b>8.3.4</b> Using different shovels</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="8-sampling.html"><a href="8-sampling.html#polls"><i class="fa fa-check"></i><b>8.4</b> In real-life sampling: Polls</a></li>
<li class="chapter" data-level="8.5" data-path="8-sampling.html"><a href="8-sampling.html#conclusion-6"><i class="fa fa-check"></i><b>8.5</b> Conclusion</a><ul>
<li class="chapter" data-level="8.5.1" data-path="8-sampling.html"><a href="8-sampling.html#central-limit-theorem"><i class="fa fa-check"></i><b>8.5.1</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="8.5.2" data-path="8-sampling.html"><a href="8-sampling.html#whats-to-come-5"><i class="fa fa-check"></i><b>8.5.2</b> What’s to come?</a></li>
<li class="chapter" data-level="8.5.3" data-path="8-sampling.html"><a href="8-sampling.html#script-of-r-code-5"><i class="fa fa-check"></i><b>8.5.3</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html"><i class="fa fa-check"></i><b>9</b> Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#needed-packages-6"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#datacamp-5"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="9.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#bootstrapping"><i class="fa fa-check"></i><b>9.1</b> Bootstrapping</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#data-explanation"><i class="fa fa-check"></i><b>9.1.1</b> Data explanation</a></li>
<li class="chapter" data-level="9.1.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>9.1.2</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="9.1.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#bootstrap-process"><i class="fa fa-check"></i><b>9.1.3</b> The Bootstrapping Process</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#the-infer-package-for-statistical-inference"><i class="fa fa-check"></i><b>9.2</b> The infer package for statistical inference</a><ul>
<li class="chapter" data-level="9.2.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#specify-variables"><i class="fa fa-check"></i><b>9.2.1</b> Specify variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#generate-replicates"><i class="fa fa-check"></i><b>9.2.2</b> Generate replicates</a></li>
<li class="chapter" data-level="9.2.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#calculate-summary-statistics"><i class="fa fa-check"></i><b>9.2.3</b> Calculate summary statistics</a></li>
<li class="chapter" data-level="9.2.4" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#visualize-the-results"><i class="fa fa-check"></i><b>9.2.4</b> Visualize the results</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#now-to-confidence-intervals"><i class="fa fa-check"></i><b>9.3</b> Now to confidence intervals</a><ul>
<li class="chapter" data-level="9.3.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#percentile-method"><i class="fa fa-check"></i><b>9.3.1</b> The percentile method</a></li>
<li class="chapter" data-level="9.3.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#the-standard-error-method"><i class="fa fa-check"></i><b>9.3.2</b> The standard error method</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#comparing-bootstrap-and-sampling-distributions"><i class="fa fa-check"></i><b>9.4</b> Comparing bootstrap and sampling distributions</a></li>
<li class="chapter" data-level="9.5" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#interpreting-the-confidence-interval"><i class="fa fa-check"></i><b>9.5</b> Interpreting the confidence interval</a></li>
<li class="chapter" data-level="9.6" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#one-prop-ci"><i class="fa fa-check"></i><b>9.6</b> EXAMPLE: One proportion</a><ul>
<li class="chapter" data-level="9.6.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#observed-statistic"><i class="fa fa-check"></i><b>9.6.1</b> Observed Statistic</a></li>
<li class="chapter" data-level="9.6.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#bootstrap-distribution-1"><i class="fa fa-check"></i><b>9.6.2</b> Bootstrap distribution</a></li>
<li class="chapter" data-level="9.6.3" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#theory-based-confidence-intervals"><i class="fa fa-check"></i><b>9.6.3</b> Theory-based confidence intervals</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#example-comparing-two-proportions"><i class="fa fa-check"></i><b>9.7</b> EXAMPLE: Comparing two proportions</a><ul>
<li class="chapter" data-level="9.7.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#compute-the-point-estimate"><i class="fa fa-check"></i><b>9.7.1</b> Compute the point estimate</a></li>
<li class="chapter" data-level="9.7.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#bootstrap-distribution-2"><i class="fa fa-check"></i><b>9.7.2</b> Bootstrap distribution</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#conclusion-7"><i class="fa fa-check"></i><b>9.8</b> Conclusion</a><ul>
<li class="chapter" data-level="9.8.1" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#whats-to-come-6"><i class="fa fa-check"></i><b>9.8.1</b> What’s to come?</a></li>
<li class="chapter" data-level="9.8.2" data-path="9-confidence-intervals.html"><a href="9-confidence-intervals.html#script-of-r-code-6"><i class="fa fa-check"></i><b>9.8.2</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html"><i class="fa fa-check"></i><b>10</b> Hypothesis Testing</a><ul>
<li class="chapter" data-level="" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#needed-packages-7"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#datacamp-6"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="10.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#when-inference-is-not-needed"><i class="fa fa-check"></i><b>10.1</b> When inference is not needed</a></li>
<li class="chapter" data-level="10.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#ht-basics"><i class="fa fa-check"></i><b>10.2</b> Basics of hypothesis testing</a></li>
<li class="chapter" data-level="10.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#trial"><i class="fa fa-check"></i><b>10.3</b> Criminal trial analogy</a><ul>
<li class="chapter" data-level="10.3.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#two-possible-conclusions"><i class="fa fa-check"></i><b>10.3.1</b> Two possible conclusions</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#types-of-errors-in-hypothesis-testing"><i class="fa fa-check"></i><b>10.4</b> Types of errors in hypothesis testing</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#logic-of-hypothesis-testing"><i class="fa fa-check"></i><b>10.4.1</b> Logic of hypothesis testing</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#statistical-significance"><i class="fa fa-check"></i><b>10.5</b> Statistical significance</a></li>
<li class="chapter" data-level="10.6" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#hypothesis-testing-with-infer"><i class="fa fa-check"></i><b>10.6</b> Hypothesis testing with infer</a></li>
<li class="chapter" data-level="10.7" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#example-comparing-two-means"><i class="fa fa-check"></i><b>10.7</b> Example: Comparing two means</a><ul>
<li class="chapter" data-level="10.7.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#randomizationpermutation"><i class="fa fa-check"></i><b>10.7.1</b> Randomization/permutation</a></li>
<li class="chapter" data-level="10.7.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#comparing-action-and-romance-movies"><i class="fa fa-check"></i><b>10.7.2</b> Comparing action and romance movies</a></li>
<li class="chapter" data-level="10.7.3" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#sampling-rightarrow-randomization"><i class="fa fa-check"></i><b>10.7.3</b> Sampling <span class="math inline">\(\rightarrow\)</span> randomization</a></li>
<li class="chapter" data-level="10.7.4" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#data"><i class="fa fa-check"></i><b>10.7.4</b> Data</a></li>
<li class="chapter" data-level="10.7.5" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#model-of-h_0"><i class="fa fa-check"></i><b>10.7.5</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.7.6" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#test-statistic-delta"><i class="fa fa-check"></i><b>10.7.6</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="10.7.7" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#observed-effect-delta"><i class="fa fa-check"></i><b>10.7.7</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="10.7.8" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#simulated-data"><i class="fa fa-check"></i><b>10.7.8</b> Simulated data</a></li>
<li class="chapter" data-level="10.7.9" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#distribution-of-delta-under-h_0"><i class="fa fa-check"></i><b>10.7.9</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="10.7.10" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#the-p-value"><i class="fa fa-check"></i><b>10.7.10</b> The p-value</a></li>
<li class="chapter" data-level="10.7.11" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#corresponding-confidence-interval"><i class="fa fa-check"></i><b>10.7.11</b> Corresponding confidence interval</a></li>
<li class="chapter" data-level="10.7.12" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#summary-5"><i class="fa fa-check"></i><b>10.7.12</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#theory-hypo"><i class="fa fa-check"></i><b>10.8</b> Building theory-based methods using computation</a><ul>
<li class="chapter" data-level="10.8.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#example-t-test-for-two-independent-samples"><i class="fa fa-check"></i><b>10.8.1</b> Example: <span class="math inline">\(t\)</span>-test for two independent samples</a></li>
<li class="chapter" data-level="10.8.2" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#conditions-for-t-test"><i class="fa fa-check"></i><b>10.8.2</b> Conditions for t-test</a></li>
</ul></li>
<li class="chapter" data-level="10.9" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#conclusion-8"><i class="fa fa-check"></i><b>10.9</b> Conclusion</a><ul>
<li class="chapter" data-level="10.9.1" data-path="10-hypothesis-testing.html"><a href="10-hypothesis-testing.html#script-of-r-code-7"><i class="fa fa-check"></i><b>10.9.1</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html"><i class="fa fa-check"></i><b>11</b> Inference for Regression</a><ul>
<li class="chapter" data-level="" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#needed-packages-8"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#datacamp-7"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="11.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#simulation-based-inference-for-regression"><i class="fa fa-check"></i><b>11.1</b> Simulation-based Inference for Regression</a><ul>
<li class="chapter" data-level="11.1.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#data-1"><i class="fa fa-check"></i><b>11.1.1</b> Data</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#test-statistic-delta-1"><i class="fa fa-check"></i><b>11.1.2</b> Test statistic <span class="math inline">\(\delta\)</span></a></li>
<li class="chapter" data-level="11.1.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#observed-effect-delta-1"><i class="fa fa-check"></i><b>11.1.3</b> Observed effect <span class="math inline">\(\delta^*\)</span></a></li>
<li class="chapter" data-level="11.1.4" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#model-of-h_0-1"><i class="fa fa-check"></i><b>11.1.4</b> Model of <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="11.1.5" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#simulated-data-1"><i class="fa fa-check"></i><b>11.1.5</b> Simulated data</a></li>
<li class="chapter" data-level="11.1.6" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#distribution-of-delta-under-h_0-1"><i class="fa fa-check"></i><b>11.1.6</b> Distribution of <span class="math inline">\(\delta\)</span> under <span class="math inline">\(H_0\)</span></a></li>
<li class="chapter" data-level="11.1.7" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#the-p-value-1"><i class="fa fa-check"></i><b>11.1.7</b> The p-value</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#bootstrapping-for-the-regression-slope"><i class="fa fa-check"></i><b>11.2</b> Bootstrapping for the regression slope</a></li>
<li class="chapter" data-level="11.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#inference-for-multiple-regression"><i class="fa fa-check"></i><b>11.3</b> Inference for multiple regression</a><ul>
<li class="chapter" data-level="11.3.1" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#refresher-professor-evaluations-data"><i class="fa fa-check"></i><b>11.3.1</b> Refresher: Professor evaluations data</a></li>
<li class="chapter" data-level="11.3.2" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#refresher-visualizations"><i class="fa fa-check"></i><b>11.3.2</b> Refresher: Visualizations</a></li>
<li class="chapter" data-level="11.3.3" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#refresher-regression-tables"><i class="fa fa-check"></i><b>11.3.3</b> Refresher: Regression tables</a></li>
<li class="chapter" data-level="11.3.4" data-path="11-inference-for-regression.html"><a href="11-inference-for-regression.html#script-of-r-code-8"><i class="fa fa-check"></i><b>11.3.4</b> Script of R code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Conclusion</b></span></li>
<li class="chapter" data-level="12" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html"><i class="fa fa-check"></i><b>12</b> Thinking with Data</a><ul>
<li class="chapter" data-level="" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#needed-packages-9"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#datacamp-8"><i class="fa fa-check"></i>DataCamp</a></li>
<li class="chapter" data-level="12.1" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#seattle-house-prices"><i class="fa fa-check"></i><b>12.1</b> Case study: Seattle house prices</a><ul>
<li class="chapter" data-level="12.1.1" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#house-prices-EDA-I"><i class="fa fa-check"></i><b>12.1.1</b> Exploratory data analysis (EDA)</a></li>
<li class="chapter" data-level="12.1.2" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#log10-transformations"><i class="fa fa-check"></i><b>12.1.2</b> log10 transformations</a></li>
<li class="chapter" data-level="12.1.3" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#eda-part-ii"><i class="fa fa-check"></i><b>12.1.3</b> EDA Part II</a></li>
<li class="chapter" data-level="12.1.4" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#house-prices-regression"><i class="fa fa-check"></i><b>12.1.4</b> Regression modeling</a></li>
<li class="chapter" data-level="12.1.5" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#house-prices-inference-for-regression"><i class="fa fa-check"></i><b>12.1.5</b> Inference for regression</a></li>
<li class="chapter" data-level="12.1.6" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#house-prices-making-predictions"><i class="fa fa-check"></i><b>12.1.6</b> Making predictions</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#data-journalism"><i class="fa fa-check"></i><b>12.2</b> Case study: Effective data storytelling</a><ul>
<li class="chapter" data-level="12.2.1" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#bechdel-test-for-hollywood-gender-representation"><i class="fa fa-check"></i><b>12.2.1</b> Bechdel test for Hollywood gender representation</a></li>
<li class="chapter" data-level="12.2.2" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#us-births-in-1999"><i class="fa fa-check"></i><b>12.2.2</b> US Births in 1999</a></li>
<li class="chapter" data-level="12.2.3" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#other-examples"><i class="fa fa-check"></i><b>12.2.3</b> Other examples</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="12-thinking-with-data.html"><a href="12-thinking-with-data.html#concluding-remarks"><i class="fa fa-check"></i>Concluding remarks</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-appendixA.html"><a href="A-appendixA.html"><i class="fa fa-check"></i><b>A</b> Statistical Background</a><ul>
<li class="chapter" data-level="A.1" data-path="A-appendixA.html"><a href="A-appendixA.html#basic-statistical-terms"><i class="fa fa-check"></i><b>A.1</b> Basic statistical terms</a><ul>
<li class="chapter" data-level="A.1.1" data-path="A-appendixA.html"><a href="A-appendixA.html#mean"><i class="fa fa-check"></i><b>A.1.1</b> Mean</a></li>
<li class="chapter" data-level="A.1.2" data-path="A-appendixA.html"><a href="A-appendixA.html#median"><i class="fa fa-check"></i><b>A.1.2</b> Median</a></li>
<li class="chapter" data-level="A.1.3" data-path="A-appendixA.html"><a href="A-appendixA.html#standard-deviation"><i class="fa fa-check"></i><b>A.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="A.1.4" data-path="A-appendixA.html"><a href="A-appendixA.html#five-number-summary"><i class="fa fa-check"></i><b>A.1.4</b> Five-number summary</a></li>
<li class="chapter" data-level="A.1.5" data-path="A-appendixA.html"><a href="A-appendixA.html#distribution"><i class="fa fa-check"></i><b>A.1.5</b> Distribution</a></li>
<li class="chapter" data-level="A.1.6" data-path="A-appendixA.html"><a href="A-appendixA.html#outliers"><i class="fa fa-check"></i><b>A.1.6</b> Outliers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-appendixB.html"><a href="B-appendixB.html"><i class="fa fa-check"></i><b>B</b> Inference Examples</a><ul>
<li class="chapter" data-level="" data-path="B-appendixB.html"><a href="B-appendixB.html#needed-packages-10"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="B.1" data-path="B-appendixB.html"><a href="B-appendixB.html#inference-mind-map"><i class="fa fa-check"></i><b>B.1</b> Inference mind map</a></li>
<li class="chapter" data-level="B.2" data-path="B-appendixB.html"><a href="B-appendixB.html#one-mean"><i class="fa fa-check"></i><b>B.2</b> One mean</a><ul>
<li class="chapter" data-level="B.2.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement"><i class="fa fa-check"></i><b>B.2.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.2.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses"><i class="fa fa-check"></i><b>B.2.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.2.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data"><i class="fa fa-check"></i><b>B.2.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.2.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods"><i class="fa fa-check"></i><b>B.2.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.2.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods"><i class="fa fa-check"></i><b>B.2.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.2.6" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results"><i class="fa fa-check"></i><b>B.2.6</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="B-appendixB.html"><a href="B-appendixB.html#one-proportion"><i class="fa fa-check"></i><b>B.3</b> One proportion</a><ul>
<li class="chapter" data-level="B.3.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-1"><i class="fa fa-check"></i><b>B.3.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.3.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-1"><i class="fa fa-check"></i><b>B.3.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.3.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-1"><i class="fa fa-check"></i><b>B.3.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.3.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-1"><i class="fa fa-check"></i><b>B.3.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.3.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-1"><i class="fa fa-check"></i><b>B.3.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.3.6" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-1"><i class="fa fa-check"></i><b>B.3.6</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.4" data-path="B-appendixB.html"><a href="B-appendixB.html#two-proportions"><i class="fa fa-check"></i><b>B.4</b> Two proportions</a><ul>
<li class="chapter" data-level="B.4.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-2"><i class="fa fa-check"></i><b>B.4.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.4.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-2"><i class="fa fa-check"></i><b>B.4.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.4.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-2"><i class="fa fa-check"></i><b>B.4.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.4.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-2"><i class="fa fa-check"></i><b>B.4.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.4.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-2"><i class="fa fa-check"></i><b>B.4.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.4.6" data-path="B-appendixB.html"><a href="B-appendixB.html#check-conditions-2"><i class="fa fa-check"></i><b>B.4.6</b> Check conditions</a></li>
<li class="chapter" data-level="B.4.7" data-path="B-appendixB.html"><a href="B-appendixB.html#test-statistic-2"><i class="fa fa-check"></i><b>B.4.7</b> Test statistic</a></li>
<li class="chapter" data-level="B.4.8" data-path="B-appendixB.html"><a href="B-appendixB.html#state-conclusion-2"><i class="fa fa-check"></i><b>B.4.8</b> State conclusion</a></li>
<li class="chapter" data-level="B.4.9" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-2"><i class="fa fa-check"></i><b>B.4.9</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.5" data-path="B-appendixB.html"><a href="B-appendixB.html#two-means-independent-samples"><i class="fa fa-check"></i><b>B.5</b> Two means (independent samples)</a><ul>
<li class="chapter" data-level="B.5.1" data-path="B-appendixB.html"><a href="B-appendixB.html#problem-statement-3"><i class="fa fa-check"></i><b>B.5.1</b> Problem statement</a></li>
<li class="chapter" data-level="B.5.2" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-3"><i class="fa fa-check"></i><b>B.5.2</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.5.3" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-3"><i class="fa fa-check"></i><b>B.5.3</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.5.4" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-3"><i class="fa fa-check"></i><b>B.5.4</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.5.5" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-3"><i class="fa fa-check"></i><b>B.5.5</b> Traditional methods</a></li>
<li class="chapter" data-level="B.5.6" data-path="B-appendixB.html"><a href="B-appendixB.html#test-statistic-3"><i class="fa fa-check"></i><b>B.5.6</b> Test statistic</a></li>
<li class="chapter" data-level="B.5.7" data-path="B-appendixB.html"><a href="B-appendixB.html#compute-p-value-1"><i class="fa fa-check"></i><b>B.5.7</b> Compute <span class="math inline">\(p\)</span>-value</a></li>
<li class="chapter" data-level="B.5.8" data-path="B-appendixB.html"><a href="B-appendixB.html#state-conclusion-3"><i class="fa fa-check"></i><b>B.5.8</b> State conclusion</a></li>
<li class="chapter" data-level="B.5.9" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-3"><i class="fa fa-check"></i><b>B.5.9</b> Comparing results</a></li>
</ul></li>
<li class="chapter" data-level="B.6" data-path="B-appendixB.html"><a href="B-appendixB.html#two-means-paired-samples"><i class="fa fa-check"></i><b>B.6</b> Two means (paired samples)</a><ul>
<li class="chapter" data-level="B.6.1" data-path="B-appendixB.html"><a href="B-appendixB.html#competing-hypotheses-4"><i class="fa fa-check"></i><b>B.6.1</b> Competing hypotheses</a></li>
<li class="chapter" data-level="B.6.2" data-path="B-appendixB.html"><a href="B-appendixB.html#exploring-the-sample-data-4"><i class="fa fa-check"></i><b>B.6.2</b> Exploring the sample data</a></li>
<li class="chapter" data-level="B.6.3" data-path="B-appendixB.html"><a href="B-appendixB.html#non-traditional-methods-4"><i class="fa fa-check"></i><b>B.6.3</b> Non-traditional methods</a></li>
<li class="chapter" data-level="B.6.4" data-path="B-appendixB.html"><a href="B-appendixB.html#traditional-methods-4"><i class="fa fa-check"></i><b>B.6.4</b> Traditional methods</a></li>
<li class="chapter" data-level="B.6.5" data-path="B-appendixB.html"><a href="B-appendixB.html#comparing-results-4"><i class="fa fa-check"></i><b>B.6.5</b> Comparing results</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="C-appendixC.html"><a href="C-appendixC.html"><i class="fa fa-check"></i><b>C</b> Reach for the Stars</a><ul>
<li class="chapter" data-level="" data-path="C-appendixC.html"><a href="C-appendixC.html#needed-packages-11"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="C.1" data-path="C-appendixC.html"><a href="C-appendixC.html#sorted-barplots"><i class="fa fa-check"></i><b>C.1</b> Sorted barplots</a></li>
<li class="chapter" data-level="C.2" data-path="C-appendixC.html"><a href="C-appendixC.html#interactive-graphics"><i class="fa fa-check"></i><b>C.2</b> Interactive graphics</a><ul>
<li class="chapter" data-level="C.2.1" data-path="C-appendixC.html"><a href="C-appendixC.html#interactive-linegraphs"><i class="fa fa-check"></i><b>C.2.1</b> Interactive linegraphs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to Statistical and Data Sciences via R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<html>
<img src='http://moderndive.com/images/logos/wide_format.png' alt="ModernDive">
</html>
<div id="wrangling" class="section level1">
<h1><span class="header-section-number">5</span> Data Wrangling via dplyr</h1>
<!--
- Make sure to refer back to plots in the viz chapter and consider how the
  material here relates to answering the questions posed in viz chapter
-->
<p>Let’s briefly recap where we have been so far and where we are headed. In Chapter <a href="4-tidy.html#tidy">4</a>, we discussed what it means for data to be tidy. We saw that this refers to observations corresponding to rows and variables being stored in columns (one variable for every column). The entries in the data frame correspond to different combinations of observations (specific instances of observational units) and variables. In the <code>flights</code> data frame, we saw that each row corresponds to a different flight leaving New York City. In other words, the <strong>observational unit</strong> of the <code>flights</code> tidy data frame is a flight. The variables are listed as columns, and for <code>flights</code> these columns include both quantitative variables like <code>dep_delay</code> and <code>distance</code> and also categorical variables like <code>carrier</code> and <code>origin</code>. An entry in the table corresponds to a particular flight on a given day and a particular value of a given variable representing that flight.</p>
<p>Armed with this knowledge and looking back on Chapter <a href="3-viz.html#viz">3</a>, we see that organizing data in this tidy way makes it easy for us to produce graphics, specifically a set of 5 common graphics we termed the <em>5 Named Graphics</em> (5NG):</p>
<ol style="list-style-type: decimal">
<li>scatterplots</li>
<li>linegraphs</li>
<li>boxplots</li>
<li>histograms</li>
<li>barplots</li>
</ol>
<p>We can simply specify what variable/column we would like on one axis, (if applicable) what variable we’d like on the other axis, and what type of plot we’d like to make by specifying the <code>geom</code>etric object in question. We can also vary aesthetic attributes of the geometric objects in question (points, lines, bar), such as the size and color, along the values of another variable in this tidy dataset. Recall the Gapminder example from Figure <a href="3-viz.html#fig:gapminder">3.1</a>.</p>
<p>Lastly, in a few spots in Chapter <a href="3-viz.html#viz">3</a> and Chapter <a href="4-tidy.html#tidy">4</a>, we hinted at some ways to summarize and wrangle data to suit your needs, using the <code>filter()</code> and <code>inner_join()</code> functions. This chapter expands on these functions by giving a variety of examples using what we term the <em>Five Main Verbs</em> (5MV) in the <code>dplyr</code> package <span class="citation">(Wickham, François, et al. 2018)</span>.</p>
<div id="needed-packages-2" class="section level3 unnumbered">
<h3>Needed packages</h3>
<p>Let’s load all the packages needed for this chapter (this assumes you’ve already installed them). If needed, read Section <a href="2-getting-started.html#packages">2.3</a> for information on how to install and load R packages.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)
<span class="kw">library</span>(nycflights13)</code></pre></div>
</div>
<div id="datacamp-2" class="section level3 unnumbered">
<h3>DataCamp</h3>
<p>Our approach to introducing data wrangling tools from the <code>dplyr</code> package is very similar to the approach taken in <a href="https://twitter.com/drob">David Robinson’s</a> DataCamp course “Introduction to the Tidyverse,” a course targetted at people new to R and the tidyverse. If you’re interested in complementing your learning below in an interactive online environment, click on the image below to access the course. The relevant chapters are Chapter 1 on “Data wrangling” and Chapter 3 on “Grouping and summarizing”.</p>
<center>
<a target="_blank" class="page-link" href="https://www.datacamp.com/courses/introduction-to-the-tidyverse"><img src="images/datacamp_intro_to_tidyverse.png" alt="Drawing" style="height: 150px;"/></a>
</center>
<p>While not required for this book, if you would like a quick peek at more powerful tools to explore, tame, tidy, and transform data, we suggest you take <a href="https://twitter.com/apreshill">Alison Hill’s</a> DataCamp course “Working with Data in the Tidyverse,” Click on the image below to access the course. The relevant chapter is Chapter 3 “Tidy your data.”</p>
<center>
<a target="_blank" class="page-link" href="https://www.datacamp.com/courses/working-with-data-in-the-tidyverse"><img src="images/datacamp_working_with_data.png" alt="Drawing" style="height: 150px;"/></a>
</center>
<hr />
<!--Subsection on Pipe -->
</div>
<div id="piping" class="section level2">
<h2><span class="header-section-number">5.1</span> The pipe <code>%&gt;%</code></h2>
<p>Before we introduce the five main verbs, we first introduce the pipe operator (<code>%&gt;%</code>). Just as the <code>+</code> sign was used to add layers to a plot created using <code>ggplot()</code>, the pipe operator allows us to chain together <code>dplyr</code> data wrangling functions. The pipe operator can be read as “<em>then</em>”. The <code>%&gt;%</code> operator allows us to go from one step in <code>dplyr</code> to the next easily so we can, for example:</p>
<ul>
<li><code>filter</code> our data frame to only focus on a few rows <em>then</em></li>
<li><code>group_by</code> another variable to create groups <em>then</em></li>
<li><code>summarize</code> this grouped data to calculate the mean for each level of the group.</li>
</ul>
<p>The piping syntax will be our major focus throughout the rest of this book and you’ll find that you’ll quickly be addicted to the chaining with some practice.</p>
<hr />
<!--Subsection on Verbs -->
</div>
<div id="five-main-verbs---the-5mv" class="section level2">
<h2><span class="header-section-number">5.2</span> Five Main Verbs - The 5MV</h2>
<p>The <code>d</code> in <code>dplyr</code> stands for data frames, so the functions in <code>dplyr</code> are built for working with objects of the data frame type. For now, we focus on the 5MV: the five most commonly used functions that help wrangle and summarize data. A description of these verbs follows, with each section devoted to an example of that verb, or a combination of a few verbs, in action.</p>
<ol style="list-style-type: decimal">
<li><code>filter()</code>: Pick rows based on conditions about their values</li>
<li><code>summarize()</code>: Compute summary measures known as “summary statistics” of variables</li>
<li><code>group_by()</code>: Group rows of observations together</li>
<li><code>mutate()</code>: Create a new variable in the data frame by mutating existing ones</li>
<li><code>arrange()</code>: Arrange/sort the rows based on one or more variables</li>
</ol>
<p>Just as we had the Five Named Graphs for data visualization using <code>ggplot2</code> in Chapter <a href="3-viz.html#viz">3</a>, we have the 5MV here (The Five Main Verbs in <code>dplyr</code>) for data wrangling. All of the 5MVs follow the same syntax, with the argument before the pipe <code>%&gt;%</code> being the name of the data frame, then the name of the verb, followed with other arguments specifying which criteria you’d like the verb to work with in parentheses.</p>
<p>Keep in mind, there are more advanced functions than just these five and you’ll see some examples of this near the end of this chapter in <a href="5-wrangling.html#other-verbs">5.9</a>, but with the 5MV you’ll be able to perform a broad array of data wrangling tasks.</p>
</div>
<div id="filter" class="section level2">
<h2><span class="header-section-number">5.3</span> 5MV#1: Filter observations using filter</h2>
<div class="figure" style="text-align: center"><span id="fig:filter"></span>
<img src="images/filter.png" alt="Filter diagram from Data Wrangling with dplyr and tidyr cheatsheet" width="\textwidth" />
<p class="caption">
Figure 5.1: Filter diagram from Data Wrangling with dplyr and tidyr cheatsheet
</p>
</div>
<p>The <code>filter</code> function here works much like the “Filter” option in Microsoft Excel; it allows you to specify criteria about values of a variable in your dataset and then chooses only those rows that match that criteria. We begin by focusing only on flights from New York City to Portland, Oregon. The <code>dest</code> code (or airport code) for Portland, Oregon is <code>&quot;PDX&quot;</code>. Run the following and look at the resulting spreadsheet to ensure that only flights heading to Portland are chosen here:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">portland_flights &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(dest <span class="op">==</span><span class="st"> &quot;PDX&quot;</span>)
<span class="kw">View</span>(portland_flights)</code></pre></div>
<p>Note the following:</p>
<ul>
<li>The ordering of the commands:
<ul>
<li>Take the data frame <code>flights</code> <em>then</em></li>
<li><code>filter</code> the data frame so that only those where the <code>dest</code> equals <code>&quot;PDX&quot;</code> are included.</li>
</ul></li>
<li>The double equal sign <code>==</code> for testing for equality, and not <code>=</code>. You are almost guaranteed to make the mistake at least once of only including one equals sign.</li>
</ul>
<p>You can combine multiple criteria together using operators that make comparisons:</p>
<ul>
<li><code>|</code> corresponds to “or”</li>
<li><code>&amp;</code> corresponds to “and”</li>
</ul>
<p>We can often skip the use of <code>&amp;</code> and just separate our conditions with a comma. You’ll see this in the example below.</p>
<p>In addition, you can use other mathematical checks (similar to <code>==</code>):</p>
<ul>
<li><code>&gt;</code> corresponds to “greater than”</li>
<li><code>&lt;</code> corresponds to “less than”</li>
<li><code>&gt;=</code> corresponds to “greater than or equal to”</li>
<li><code>&lt;=</code> corresponds to “less than or equal to”</li>
<li><code>!=</code> corresponds to “not equal to”</li>
</ul>
<p>To see many of these in action, let’s select all flights that left JFK airport heading to Burlington, Vermont (<code>&quot;BTV&quot;</code>) or Seattle, Washington (<code>&quot;SEA&quot;</code>) in the months of October, November, or December. Run the following</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">btv_sea_flights_fall &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(origin <span class="op">==</span><span class="st"> &quot;JFK&quot;</span>, (dest <span class="op">==</span><span class="st"> &quot;BTV&quot;</span> <span class="op">|</span><span class="st"> </span>dest <span class="op">==</span><span class="st"> &quot;SEA&quot;</span>), month <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>)
<span class="kw">View</span>(btv_sea_flights_fall)</code></pre></div>
<p>Note: even though colloquially speaking one might say “all flights leaving Burlington, Vermont <em>and</em> Seattle, Washington,” in terms of computer logical operations, we really mean “all flights leaving Burlington, Vermont <em>or</em> Seattle, Washington.” For a given row in the data, <code>dest</code> can be “BTV”, “SEA”, or something else, but not “BTV” and “SEA” at the same time.</p>
<p>Another example uses the <code>!</code> to pick rows that <em>don’t</em> match a condition. The <code>!</code> can be read as “not”. Here we are selecting rows corresponding to flights that didn’t go to Burlington, VT or Seattle, WA.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">not_BTV_SEA &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(dest <span class="op">==</span><span class="st"> &quot;BTV&quot;</span> <span class="op">|</span><span class="st"> </span>dest <span class="op">==</span><span class="st"> &quot;SEA&quot;</span>))
<span class="kw">View</span>(not_BTV_SEA)</code></pre></div>
<p>As a final note we point out that <code>filter()</code> should often be the first verb you’ll apply to your data. This cleans your dataset to only those rows you care about, or put differently, it narrows down the scope to just the observations your care about.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC5.1)</strong> What’s another way using the “not” operator <code>!</code> we could filter only the rows that are not going to Burlington, VT nor Seattle, WA in the <code>flights</code> data frame? Test this out using the code above.</p>
<p><strong>Learning Check Solutions</strong><br />
<strong>(LC5.1)</strong> What’s another way using the “not” operator <code>!</code> we could filter only the rows that are not going to Burlington, VT nor Seattle, WA in the <code>flights</code> data frame? Test this out using the code above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Original in book</span>
not_BTV_SEA &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(dest <span class="op">==</span><span class="st"> &quot;BTV&quot;</span> <span class="op">|</span><span class="st"> </span>dest <span class="op">==</span><span class="st"> &quot;SEA&quot;</span>))

<span class="co"># Alternative way</span>
not_BTV_SEA &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>dest <span class="op">==</span><span class="st"> &quot;BTV&quot;</span> <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span>dest <span class="op">==</span><span class="st"> &quot;SEA&quot;</span>)

<span class="co"># Yet another way</span>
not_BTV_SEA &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(dest <span class="op">!=</span><span class="st"> &quot;BTV&quot;</span> <span class="op">&amp;</span><span class="st"> </span>dest <span class="op">!=</span><span class="st"> &quot;SEA&quot;</span>)</code></pre></div>
<div class="learncheck">

</div>
</div>
<div id="summarize" class="section level2">
<h2><span class="header-section-number">5.4</span> 5MV#2: Summarize variables using summarize</h2>
<p>The next common task when working with data is to be able to summarize data: take a large number of values and summarize them with a single value. While this may seem like a very abstract idea, something as simple as the sum, the smallest value, and the largest values are all summaries of a large number of values.</p>
<div class="figure" style="text-align: center"><span id="fig:sum1"></span>
<img src="images/summarize1.png" alt="Summarize diagram from Data Wrangling with dplyr and tidyr cheatsheet" width="\textwidth" />
<p class="caption">
Figure 5.2: Summarize diagram from Data Wrangling with dplyr and tidyr cheatsheet
</p>
</div>
<div class="figure" style="text-align: center"><span id="fig:sum2"></span>
<img src="images/summary.png" alt="Another summarize diagram from Data Wrangling with dplyr and tidyr cheatsheet" width="\textwidth" />
<p class="caption">
Figure 5.3: Another summarize diagram from Data Wrangling with dplyr and tidyr cheatsheet
</p>
</div>
<p>We can calculate the standard deviation and mean of the temperature variable <code>temp</code> in the <code>weather</code> data frame of <code>nycflights13</code> in one step using the <code>summarize</code> (or equivalently using the UK spelling <code>summarise</code>) function in <code>dplyr</code> (See Appendix <a href="A-appendixA.html#appendixA">A</a>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_temp &lt;-<span class="st"> </span>weather <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(temp), <span class="dt">std_dev =</span> <span class="kw">sd</span>(temp))
summary_temp</code></pre></div>
<p>mean std_dev —– ——–</p>
<p>We’ve created a small data frame here called <code>summary_temp</code> that includes both the <code>mean</code> and the <code>std_dev</code> of the <code>temp</code> variable in <code>weather</code>. Notice as shown in Figures <a href="5-wrangling.html#fig:sum1">5.2</a> and <a href="5-wrangling.html#fig:sum2">5.3</a>, the data frame <code>weather</code> went from many rows to a single row of just the summary values in the data frame <code>summary_temp</code>.</p>
<p>But why are the values returned <code>NA</code>? This stands for “not available or not applicable” and is how R encodes <em>missing values</em>; if in a data frame for a particular row and column no value exists, <code>NA</code> is stored instead. Furthermore, by default any time you try to summarize a number of values (using <code>mean()</code> and <code>sd()</code> for example) that has one or more missing values, then <code>NA</code> is returned.</p>
<p>Values can be missing for many reasons. Perhaps the data was collected but someone forgot to enter it? Perhaps the data was not collected at all because it was too difficult? Perhaps there was an erroneous value that someone entered that has been correct to read as missing? You’ll often encounter issues with missing values.</p>
<p>You can summarize all non-missing values by setting the <code>na.rm</code> argument to TRUE (<code>rm</code> is short for “remove”). This will remove any <code>NA</code> missing values and only return the summary value for all non-missing values. So the code below computes the mean and standard deviation of all non-missing values. Notice how the <code>na.rm=TRUE</code> are set as arguments to the <code>mean()</code> and <code>sd()</code> functions, and not to the <code>summarize()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_temp &lt;-<span class="st"> </span>weather <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">std_dev =</span> <span class="kw">sd</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
summary_temp</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">mean</th>
<th align="right">std_dev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">55.26039</td>
<td align="right">17.78785</td>
</tr>
</tbody>
</table>
<p>It is not good practice to include a <code>na.rm = TRUE</code> in your summary commands by default; you should attempt to run code first without this argument as this will alert you to the presense of missing data. Only after you’ve identified where missing values occur and have thought about the potential causes of this missing should you consider using <code>na.rm = TRUE</code>. In the upcoming Learning Checks we’ll consider the possible ramifications of blindly sweeping rows with missing values under the rug.</p>
<!--
If we'd like to access either of these values directly we can use the `$` to specify a column in a data frame. For example:


```r
#summary_temp$mean
```
-->
<p>What other summary functions can we use inside the <code>summarize()</code> verb? Any function in R that takes a vector of values and returns just one. Here are just a few:</p>
<ul>
<li><code>mean()</code>: the mean AKA the average</li>
<li><code>sd()</code>: the standard deviation, which is a measure of spread</li>
<li><code>min()</code> and <code>max()</code>: the minimum and maximum values respectively</li>
<li><code>IQR()</code>: Interquartile range</li>
<li><code>sum()</code>: the sum</li>
<li><code>n()</code>: a count of the number of rows/observations in each group. This particular summary function will make more sense when <code>group_by()</code> is covered in Section <a href="5-wrangling.html#groupby">5.5</a>.</li>
</ul>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC5.2)</strong> Say a doctor is studying the effect of smoking on lung cancer for a large number of patients who have records measured at five year intervals. She notices that a large number of patients have missing data points because the patient has died, so she chooses to ignore these patients in her analysis. What is wrong with this doctor’s approach?</p>
<p><strong>(LC5.3)</strong> Modify the above <code>summarize</code> function to create <code>summary_temp</code> to also use the <code>n()</code> summary function: <code>summarize(count = n())</code>. What does the returned value correspond to?</p>
<p><strong>(LC5.4)</strong> Why doesn’t the following code work? Run the code line by line instead of all at once, and then look at the data. In other words, run <code>summary_temp &lt;- weather %&gt;% summarize(mean = mean(temp, na.rm = TRUE))</code> first.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_temp &lt;-<span class="st"> </span>weather <span class="op">%&gt;%</span><span class="st">   </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">std_dev =</span> <span class="kw">sd</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p><strong>Learning Check Solutions</strong><br />
<strong>(LC5.2)</strong> A doctor is studying the effect of smoking on lung cancer for a large number of patients who have records measured at five year intervals. They notice that a large number of patients have missing data points because the patient has died, so they choose to ignore these patients in their analysis. What is wrong with this doctor’s approach?<br />
The missing patients may have died of lung cancer! So to ignore them might seriously <strong>bias</strong> your results! It is very important to think of what the consequences on your analysis are of ignoring missing data! Ask yourself: + There is a systematic reasons why certain values are missing? If so, you might be biasing your results! + If there isn’t, then it might be ok to “sweep missing values under the rug.”</p>
<p><strong>(LC5.3)</strong> Modify the above <code>summarize</code> function to create <code>summary_temp</code> to also use the <code>n()</code> summary function: <code>summarize(count = n())</code>. What does the returned value correspond to?</p>
<p>It corresponds to a count of the number of observations/rows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weather <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>())</code></pre></div>
<pre><code># A tibble: 1 x 1
  count
  &lt;int&gt;
1 26115</code></pre>
<p><strong>(LC5.4)</strong> Why doesn’t the following code work?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_temp &lt;-<span class="st"> </span>weather <span class="op">%&gt;%</span><span class="st">   </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">std_dev =</span> <span class="kw">sd</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p>Consider the output of only running the first two lines:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weather <span class="op">%&gt;%</span><span class="st">   </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code># A tibble: 1 x 1
   mean
  &lt;dbl&gt;
1  55.3</code></pre>
<p>Because after the first <code>summarize()</code>, the variable <code>temp</code> disappears as it has been collapsed to the value <code>mean</code>. So when we try to run the second <code>summarize()</code>, it can’t find the variable temp` to compute the standard deviation of.</p>
<div class="learncheck">

</div>
</div>
<div id="groupby" class="section level2">
<h2><span class="header-section-number">5.5</span> 5MV#3: Group rows using group_by</h2>
<div class="figure" style="text-align: center"><span id="fig:groupsummarize"></span>
<img src="images/group_summary.png" alt="Group by and summarize diagram from Data Wrangling with dplyr and tidyr cheatsheet" width="\textwidth" />
<p class="caption">
Figure 5.4: Group by and summarize diagram from Data Wrangling with dplyr and tidyr cheatsheet
</p>
</div>
<p>It’s often more useful to summarize a variable based on the groupings of another variable. Let’s say, we are interested in the mean and standard deviation of temperatures but <em>grouped by month</em>. To be more specific: we want the mean and standard deviation of temperatures</p>
<ol style="list-style-type: decimal">
<li>split by month.</li>
<li>sliced by month.</li>
<li>aggregated by month.</li>
<li>collapsed over month.</li>
</ol>
<p>Run the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_monthly_temp &lt;-<span class="st"> </span>weather <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(month) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean =</span> <span class="kw">mean</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), 
            <span class="dt">std_dev =</span> <span class="kw">sd</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
summary_monthly_temp</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">month</th>
<th align="right">mean</th>
<th align="right">std_dev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">35.63566</td>
<td align="right">10.224635</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">34.27060</td>
<td align="right">6.982378</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">39.88007</td>
<td align="right">6.249278</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">51.74564</td>
<td align="right">8.786168</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">61.79500</td>
<td align="right">9.681644</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">72.18400</td>
<td align="right">7.546371</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">80.06622</td>
<td align="right">7.119898</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">74.46847</td>
<td align="right">5.191615</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">67.37129</td>
<td align="right">8.465902</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">60.07113</td>
<td align="right">8.846035</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="right">44.99043</td>
<td align="right">10.443805</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">38.44180</td>
<td align="right">9.982432</td>
</tr>
</tbody>
</table>
<p>This code is identical to the previous code that created <code>summary_temp</code>, with an extra <code>group_by(month)</code> added. Grouping the <code>weather</code> dataset by <code>month</code> and then passing this new data frame into <code>summarize</code> yields a data frame that shows the mean and standard deviation of temperature for each month in New York City. Note: Since each row in <code>summary_monthly_temp</code> represents a summary of different rows in <code>weather</code>, the observational units have changed.</p>
<p>It is important to note that <code>group_by</code> doesn’t change the data frame. It sets <em>meta-data</em> (data about the data), specifically the group structure of the data. It is only after we apply the <code>summarize</code> function that the data frame changes.</p>
<p>If we would like to remove this group structure meta-data, we can pipe the resulting data frame into the <code>ungroup()</code> function. For example, say the group structure meta-data is set to be by month via <code>group_by(month)</code>, all future summarizations will be reported on a month-by-month basis. If however, we would like to no longer have this and have all summarizations be for all data in a single group (in this case over the entire year of 2013), then pipe the data frame in question through and <code>ungroup()</code> to remove this.</p>
<p>We now revisit the <code>n()</code> counting summary function we introduced in the previous section. For example, suppose we’d like to get a sense for how many flights departed each of the three airports in New York City:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_origin &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(origin) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>())
by_origin</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">origin</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">EWR</td>
<td align="right">120835</td>
</tr>
<tr class="even">
<td align="left">JFK</td>
<td align="right">111279</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="right">104662</td>
</tr>
</tbody>
</table>
<p>We see that Newark (<code>&quot;EWR&quot;</code>) had the most flights departing in 2013 followed by <code>&quot;JFK&quot;</code> and lastly by LaGuardia (<code>&quot;LGA&quot;</code>). Note there is a subtle but important difference between <code>sum()</code> and <code>n()</code>. While <code>sum()</code> simply adds up a large set of numbers, the latter counts the number of times each of many different values occur.</p>
<div id="grouping-by-more-than-one-variable" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Grouping by more than one variable</h3>
<p>You are not limited to grouping by one variable! Say you wanted to know the number of flights leaving each of the three New York City airports <em>for each month</em>, we can also group by a second variable <code>month</code>: <code>group_by(origin, month)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_origin_monthly &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(origin, month) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>())
by_origin_monthly</code></pre></div>
<pre><code># A tibble: 36 x 3
# Groups:   origin [?]
   origin month count
   &lt;chr&gt;  &lt;int&gt; &lt;int&gt;
 1 EWR        1  9893
 2 EWR        2  9107
 3 EWR        3 10420
 4 EWR        4 10531
 5 EWR        5 10592
 6 EWR        6 10175
 7 EWR        7 10475
 8 EWR        8 10359
 9 EWR        9  9550
10 EWR       10 10104
# ... with 26 more rows</code></pre>
<p>We see there are 36 rows to <code>by_origin_monthly</code> because there are 12 months times 3 airports (<code>EWR</code>, <code>JFK</code>, and <code>LGA</code>). Let’s now pose two questions. First, what if we reverse the order of the grouping i.e. we <code>group_by(month, origin)</code>?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_monthly_origin &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(month, origin) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>())
by_monthly_origin</code></pre></div>
<pre><code># A tibble: 36 x 3
# Groups:   month [?]
   month origin count
   &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
 1     1 EWR     9893
 2     1 JFK     9161
 3     1 LGA     7950
 4     2 EWR     9107
 5     2 JFK     8421
 6     2 LGA     7423
 7     3 EWR    10420
 8     3 JFK     9697
 9     3 LGA     8717
10     4 EWR    10531
# ... with 26 more rows</code></pre>
<p>In <code>by_monthly_origin</code> the <code>month</code> column is now first and the rows are sorted by <code>month</code> instead of origin. If you compare the values of <code>count</code> in <code>by_origin_monthly</code> and <code>by_monthly_origin</code> using the <code>View()</code> function, you’ll see that the values are actually the same, just presented in a different order.</p>
<p>Second, why do we <code>group_by(origin, month)</code> and not <code>group_by(origin)</code> and then <code>group_by(month)</code>? Let’s investigate:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_origin_monthly_incorrect &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(origin) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(month) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>())
by_origin_monthly_incorrect</code></pre></div>
<pre><code># A tibble: 12 x 2
   month count
   &lt;int&gt; &lt;int&gt;
 1     1 27004
 2     2 24951
 3     3 28834
 4     4 28330
 5     5 28796
 6     6 28243
 7     7 29425
 8     8 29327
 9     9 27574
10    10 28889
11    11 27268
12    12 28135</code></pre>
<p>What happened here is that the second <code>group_by(month)</code> overrode the first <code>group_by(origin)</code>, so that in the end we are only grouping by <code>month</code>. The lesson here, is if you want to <code>group_by()</code> two or more variables, you should include all these variables in a single <code>group_by()</code> function call.</p>
<!--
Alternatively, you can use the shortcut `count()` function in `dplyr` to get the same result:


```r
by_monthly_origin <- flights %>% 
  count(origin, month)
by_monthly_origin
```

-->
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC5.5)</strong> Recall from Chapter <a href="3-viz.html#viz">3</a> when we looked at plots of temperatures by months in NYC. What does the standard deviation column in the <code>summary_monthly_temp</code> data frame tell us about temperatures in New York City throughout the year?</p>
<p><strong>(LC5.6)</strong> What code would be required to get the mean and standard deviation temperature for each day in 2013 for NYC?</p>
<p><strong>(LC5.7)</strong> Recreate <code>by_monthly_origin</code>, but instead of grouping via <code>group_by(origin, month)</code>, group variables in a different order <code>group_by(month, origin)</code>. What differs in the resulting dataset?</p>
<p><strong>(LC5.8)</strong> How could we identify how many flights left each of the three airports for each <code>carrier</code>?</p>
<p><strong>(LC5.9)</strong> How does the <code>filter</code> operation differ from a <code>group_by</code> followed by a <code>summarize</code>?</p>
<p><strong>Learning Check Solutions</strong><br />
<strong>(LC5.5)</strong> What code would be required to get the mean and standard deviation temperature for each day in 2013 for NYC?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(nycflights13)

summary_temp_by_month &lt;-<span class="st"> </span>weather <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(month) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(
          <span class="dt">mean =</span> <span class="kw">mean</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
          <span class="dt">std_dev =</span> <span class="kw">sd</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
          )</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">month</th>
<th align="right">mean</th>
<th align="right">std_dev</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">35.63566</td>
<td align="right">10.224635</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">34.27060</td>
<td align="right">6.982378</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">39.88007</td>
<td align="right">6.249278</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">51.74564</td>
<td align="right">8.786168</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">61.79500</td>
<td align="right">9.681644</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="right">72.18400</td>
<td align="right">7.546371</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">80.06622</td>
<td align="right">7.119898</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">74.46847</td>
<td align="right">5.191615</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="right">67.37129</td>
<td align="right">8.465902</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="right">60.07113</td>
<td align="right">8.846035</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="right">44.99043</td>
<td align="right">10.443805</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">38.44180</td>
<td align="right">9.982432</td>
</tr>
</tbody>
</table>
<p>The standard deviation is a quantification of <strong>spread</strong> and <strong>variability</strong>. We see that the period in November, December, and January has the most variation in weather, so you can expect very different temperatures on different days.</p>
<p><strong>(LC5.6)</strong> What code would be required to get the mean and standard deviation temperature for each day in 2013 for NYC?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summary_temp_by_day &lt;-<span class="st"> </span>weather <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(year, month, day) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(
          <span class="dt">mean =</span> <span class="kw">mean</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
          <span class="dt">std_dev =</span> <span class="kw">sd</span>(temp, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
          )
summary_temp_by_day</code></pre></div>
<pre><code># A tibble: 364 x 5
# Groups:   year, month [?]
    year month   day  mean std_dev
   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1  2013     1     1  37.0    4.00
 2  2013     1     2  28.7    3.45
 3  2013     1     3  30.0    2.58
 4  2013     1     4  34.9    2.45
 5  2013     1     5  37.2    4.01
 6  2013     1     6  40.1    4.40
 7  2013     1     7  40.6    3.68
 8  2013     1     8  40.1    5.77
 9  2013     1     9  43.2    5.40
10  2013     1    10  43.8    2.95
# ... with 354 more rows</code></pre>
<p>Note: <code>group_by(day)</code> is not enough, because <code>day</code> is a value between 1-31. We need to <code>group_by(year, month, day)</code></p>
<p><strong>(LC5.7)</strong> Recreate <code>by_monthly_origin</code>, but instead of grouping via <code>group_by(origin, month)</code>, group variables in a different order <code>group_by(month, origin)</code>. What differs in the resulting dataset?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_monthly_origin &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(month, origin) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count =</span> <span class="kw">n</span>())</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">by_monthly_origin</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">month</th>
<th align="left">origin</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">EWR</td>
<td align="right">9893</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="left">JFK</td>
<td align="right">9161</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="left">LGA</td>
<td align="right">7950</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">EWR</td>
<td align="right">9107</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="left">JFK</td>
<td align="right">8421</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">LGA</td>
<td align="right">7423</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">EWR</td>
<td align="right">10420</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">JFK</td>
<td align="right">9697</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">LGA</td>
<td align="right">8717</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">EWR</td>
<td align="right">10531</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="left">JFK</td>
<td align="right">9218</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">LGA</td>
<td align="right">8581</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">EWR</td>
<td align="right">10592</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">JFK</td>
<td align="right">9397</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">LGA</td>
<td align="right">8807</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">EWR</td>
<td align="right">10175</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left">JFK</td>
<td align="right">9472</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">LGA</td>
<td align="right">8596</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">EWR</td>
<td align="right">10475</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="left">JFK</td>
<td align="right">10023</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="left">LGA</td>
<td align="right">8927</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">EWR</td>
<td align="right">10359</td>
</tr>
<tr class="odd">
<td align="right">8</td>
<td align="left">JFK</td>
<td align="right">9983</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="left">LGA</td>
<td align="right">8985</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">EWR</td>
<td align="right">9550</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="left">JFK</td>
<td align="right">8908</td>
</tr>
<tr class="odd">
<td align="right">9</td>
<td align="left">LGA</td>
<td align="right">9116</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">EWR</td>
<td align="right">10104</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="left">JFK</td>
<td align="right">9143</td>
</tr>
<tr class="even">
<td align="right">10</td>
<td align="left">LGA</td>
<td align="right">9642</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">EWR</td>
<td align="right">9707</td>
</tr>
<tr class="even">
<td align="right">11</td>
<td align="left">JFK</td>
<td align="right">8710</td>
</tr>
<tr class="odd">
<td align="right">11</td>
<td align="left">LGA</td>
<td align="right">8851</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">EWR</td>
<td align="right">9922</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="left">JFK</td>
<td align="right">9146</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="left">LGA</td>
<td align="right">9067</td>
</tr>
</tbody>
</table>
<p>The difference is they are organized/sorted by <code>month</code> first, then <code>origin</code></p>
<p><strong>(LC5.8)</strong> How could we identify how many flights left each of the three airports for each <code>carrier</code>? We could summarize the count from each airport using the <code>n()</code> function, which <em>counts rows</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">count_flights_by_airport &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(origin, carrier) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">count=</span><span class="kw">n</span>())</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">count_flights_by_airport</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">origin</th>
<th align="left">carrier</th>
<th align="right">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">EWR</td>
<td align="left">9E</td>
<td align="right">1268</td>
</tr>
<tr class="even">
<td align="left">EWR</td>
<td align="left">AA</td>
<td align="right">3487</td>
</tr>
<tr class="odd">
<td align="left">EWR</td>
<td align="left">AS</td>
<td align="right">714</td>
</tr>
<tr class="even">
<td align="left">EWR</td>
<td align="left">B6</td>
<td align="right">6557</td>
</tr>
<tr class="odd">
<td align="left">EWR</td>
<td align="left">DL</td>
<td align="right">4342</td>
</tr>
<tr class="even">
<td align="left">EWR</td>
<td align="left">EV</td>
<td align="right">43939</td>
</tr>
<tr class="odd">
<td align="left">EWR</td>
<td align="left">MQ</td>
<td align="right">2276</td>
</tr>
<tr class="even">
<td align="left">EWR</td>
<td align="left">OO</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">EWR</td>
<td align="left">UA</td>
<td align="right">46087</td>
</tr>
<tr class="even">
<td align="left">EWR</td>
<td align="left">US</td>
<td align="right">4405</td>
</tr>
<tr class="odd">
<td align="left">EWR</td>
<td align="left">VX</td>
<td align="right">1566</td>
</tr>
<tr class="even">
<td align="left">EWR</td>
<td align="left">WN</td>
<td align="right">6188</td>
</tr>
<tr class="odd">
<td align="left">JFK</td>
<td align="left">9E</td>
<td align="right">14651</td>
</tr>
<tr class="even">
<td align="left">JFK</td>
<td align="left">AA</td>
<td align="right">13783</td>
</tr>
<tr class="odd">
<td align="left">JFK</td>
<td align="left">B6</td>
<td align="right">42076</td>
</tr>
<tr class="even">
<td align="left">JFK</td>
<td align="left">DL</td>
<td align="right">20701</td>
</tr>
<tr class="odd">
<td align="left">JFK</td>
<td align="left">EV</td>
<td align="right">1408</td>
</tr>
<tr class="even">
<td align="left">JFK</td>
<td align="left">HA</td>
<td align="right">342</td>
</tr>
<tr class="odd">
<td align="left">JFK</td>
<td align="left">MQ</td>
<td align="right">7193</td>
</tr>
<tr class="even">
<td align="left">JFK</td>
<td align="left">UA</td>
<td align="right">4534</td>
</tr>
<tr class="odd">
<td align="left">JFK</td>
<td align="left">US</td>
<td align="right">2995</td>
</tr>
<tr class="even">
<td align="left">JFK</td>
<td align="left">VX</td>
<td align="right">3596</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="left">9E</td>
<td align="right">2541</td>
</tr>
<tr class="even">
<td align="left">LGA</td>
<td align="left">AA</td>
<td align="right">15459</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="left">B6</td>
<td align="right">6002</td>
</tr>
<tr class="even">
<td align="left">LGA</td>
<td align="left">DL</td>
<td align="right">23067</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="left">EV</td>
<td align="right">8826</td>
</tr>
<tr class="even">
<td align="left">LGA</td>
<td align="left">F9</td>
<td align="right">685</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="left">FL</td>
<td align="right">3260</td>
</tr>
<tr class="even">
<td align="left">LGA</td>
<td align="left">MQ</td>
<td align="right">16928</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="left">OO</td>
<td align="right">26</td>
</tr>
<tr class="even">
<td align="left">LGA</td>
<td align="left">UA</td>
<td align="right">8044</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="left">US</td>
<td align="right">13136</td>
</tr>
<tr class="even">
<td align="left">LGA</td>
<td align="left">WN</td>
<td align="right">6087</td>
</tr>
<tr class="odd">
<td align="left">LGA</td>
<td align="left">YV</td>
<td align="right">601</td>
</tr>
</tbody>
</table>
<p>All remarkably similar! Note: the <code>n()</code> function counts rows, whereas the <code>sum(VARIABLE_NAME)</code> funciton sums all values of a certain numerical variable <code>VARIABLE_NAME</code>.</p>
<p><strong>(LC5.9)</strong> How does the <code>filter</code> operation differ from a <code>group_by</code> followed by a <code>summarize</code>?</p>
<ul>
<li><code>filter</code> picks out rows from the original dataset without modifying them, whereas</li>
<li><code>group_by %&gt;% summarize</code> computes summaries of numerical variables, and hence reports new values.</li>
</ul>
<div class="learncheck">

</div>
</div>
</div>
<div id="mv4-create-new-variableschange-old-variables-using-mutate" class="section level2">
<h2><span class="header-section-number">5.6</span> 5MV#4: Create new variables/change old variables using mutate</h2>
<div class="figure" style="text-align: center"><span id="fig:select"></span>
<img src="images/mutate.png" alt="Mutate diagram from Data Wrangling with dplyr and tidyr cheatsheet" width="\textwidth" />
<p class="caption">
Figure 5.5: Mutate diagram from Data Wrangling with dplyr and tidyr cheatsheet
</p>
</div>
<p>When looking at the <code>flights</code> dataset, there are some clear additional variables that could be calculated based on the values of variables already in the dataset. Passengers are often frustrated when their flights departs late, but change their mood a bit if pilots can make up some time during the flight to get them to their destination close to when they expected to land. This is commonly referred to as “gain” and we will create this variable using the <code>mutate</code> function. Note that we have also overwritten the <code>flights</code> data frame with what it was before as well as an additional variable <code>gain</code> here, or put differently, the <code>mutate()</code> command outputs a new data frame which then gets saved over the original <code>flights</code> data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">gain =</span> dep_delay <span class="op">-</span><span class="st"> </span>arr_delay)</code></pre></div>
<p>Let’s take a look at <code>dep_delay</code>, <code>arr_delay</code>, and the resulting <code>gain</code> variables for the first 5 rows in our new <code>flights</code> data frame:</p>
<pre><code># A tibble: 5 x 3
  dep_delay arr_delay  gain
      &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
1         2        11    -9
2         4        20   -16
3         2        33   -31
4        -1       -18    17
5        -6       -25    19</code></pre>
<p>The flight in the first row departed 2 minutes late but arrived 11 minutes late, so its “gained time in the air” is actually a loss of 9 minutes, hence its <code>gain</code> is <code>-9</code>. Contrast this to the flight in the fourth row which departed a minute early (<code>dep_delay</code> of <code>-1</code>) but arrived 18 minutes early (<code>arr_delay</code> of <code>-18</code>), so its “gained time in the air” is 17 minutes, hence its <code>gain</code> is <code>+17</code>.</p>
<p>Why did we overwrite <code>flights</code> instead of assigning the resulting data frame to a new object, like <code>flights_with_gain</code>? As a rough rule of thumb, as long as you are not losing information that you might need later, it’s acceptable practice to overwrite data frames. However, if you overwrite existing variables and/or change the observational units, recovering the original information might prove difficult. In this case, it might make sense to create a new data object.</p>
<p>Let’s look at summary measures of this <code>gain</code> variable and even plot it in the form of a histogram:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gain_summary &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(
    <span class="dt">min =</span> <span class="kw">min</span>(gain, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">q1 =</span> <span class="kw">quantile</span>(gain, <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">median =</span> <span class="kw">quantile</span>(gain, <span class="fl">0.5</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">q3 =</span> <span class="kw">quantile</span>(gain, <span class="fl">0.75</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">max =</span> <span class="kw">max</span>(gain, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">mean =</span> <span class="kw">mean</span>(gain, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">sd =</span> <span class="kw">sd</span>(gain, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
    <span class="dt">missing =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(gain))
  )
gain_summary</code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">min</th>
<th align="right">q1</th>
<th align="right">median</th>
<th align="right">q3</th>
<th align="right">max</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">-196</td>
<td align="right">-3</td>
<td align="right">7</td>
<td align="right">17</td>
<td align="right">109</td>
<td align="right">5.659779</td>
<td align="right">18.04365</td>
<td align="right">9430</td>
</tr>
</tbody>
</table>
<p>We’ve recreated the <code>summary</code> function we saw in Chapter <a href="3-viz.html#viz">3</a> here using the <code>summarize</code> function in <code>dplyr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> flights, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> gain)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">color =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">bins =</span> <span class="dv">20</span>)</code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-121"></span>
<img src="ismaykim_files/figure-html/unnamed-chunk-121-1.png" alt="Histogram of gain variable" width="\textwidth" />
<p class="caption">
Figure 5.6: Histogram of gain variable
</p>
</div>
<p>We can also create multiple columns at once and even refer to columns that were just created in a new column. Hadley and Garrett produce one such example in Chapter 5 of “R for Data Science” <span class="citation">(Grolemund and Wickham 2016)</span>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(
    <span class="dt">gain =</span> dep_delay <span class="op">-</span><span class="st"> </span>arr_delay,
    <span class="dt">hours =</span> air_time <span class="op">/</span><span class="st"> </span><span class="dv">60</span>,
    <span class="dt">gain_per_hour =</span> gain <span class="op">/</span><span class="st"> </span>hours
  )</code></pre></div>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC5.10)</strong> What do positive values of the <code>gain</code> variable in <code>flights</code> correspond to? What about negative values? And what about a zero value?</p>
<p><strong>(LC5.11)</strong> Could we create the <code>dep_delay</code> and <code>arr_delay</code> columns by simply subtracting <code>dep_time</code> from <code>sched_dep_time</code> and similarly for arrivals? Try the code out and explain any differences between the result and what actually appears in <code>flights</code>.</p>
<p><strong>(LC5.12)</strong> What can we say about the distribution of <code>gain</code>? Describe it in a few sentences using the plot and the <code>gain_summary</code> data frame values.</p>
<p><strong>Learning Check Solutions</strong></p>
<p><strong>(LC5.10)</strong> What do positive values of the <code>gain</code> variable in <code>flights</code> correspond to? What about negative values? And what about a zero value?</p>
<ul>
<li>Say a flight departed 20 minutes late, i.e. <code>dep_delay = 20</code></li>
<li>Then arrived 10 minutes late, i.e. <code>arr_delay = 10</code>.</li>
<li>Then <code>gain = dep_delay - arr_delay = 20 - 10  = 10</code> is positive, so it “made up/gained time in the air”.</li>
<li>0 means the departure and arrival time were the same, so no time was made up in the air. We see in most cases that the <code>gain</code> is near 0 minutes.</li>
<li>I never understood this. If the pilot says “we’re going make up time in the air” because of delay by flying faster, why don’t you always just fly faster to begin with?</li>
</ul>
<p><strong>(LC5.11)</strong> Could we create the <code>dep_delay</code> and <code>arr_delay</code> columns by simply subtracting <code>dep_time</code> from <code>sched_dep_time</code> and similarly for arrivals? Try the code out and explain any differences between the result and what actually appears in <code>flights</code>. No because you can’t do direct arithmetic on times. The difference in time between 12:03 and 11:59 is 4 minutes, but <code>1203-1159 = 44</code></p>
<p><strong>(LC5.12)</strong> What can we say about the distribution of <code>gain</code>? Describe it in a few sentences using the plot and the <code>gain_summary</code> data frame values. Most of the time the gain is a little under zero, most of the time the gain is between -50 and 50 minutes. There are some extreme cases however!</p>
<div class="learncheck">

</div>
</div>
<div id="arrange" class="section level2">
<h2><span class="header-section-number">5.7</span> 5MV#5: Reorder the data frame using arrange</h2>
<p>One of the most common things people working with data would like to do is sort the data frames by a specific variable in a column. Have you ever been asked to calculate a median by hand? This requires you to put the data in order from smallest to highest in value. The <code>dplyr</code> package has a function called <code>arrange</code> that we will use to sort/reorder our data according to the values of the specified variable. This is often used after we have used the <code>group_by</code> and <code>summarize</code> functions as we will see.</p>
<p>Let’s suppose we were interested in determining the most frequent destination airports from New York City in 2013:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">freq_dest &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num_flights =</span> <span class="kw">n</span>())
freq_dest</code></pre></div>
<pre><code># A tibble: 105 x 2
   dest  num_flights
   &lt;chr&gt;       &lt;int&gt;
 1 ABQ           254
 2 ACK           265
 3 ALB           439
 4 ANC             8
 5 ATL         17215
 6 AUS          2439
 7 AVL           275
 8 BDL           443
 9 BGR           375
10 BHM           297
# ... with 95 more rows</code></pre>
<p>You’ll see that by default the values of <code>dest</code> are displayed in alphabetical order here. We are interested in finding those airports that appear most:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">freq_dest <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(num_flights)</code></pre></div>
<pre><code># A tibble: 105 x 2
   dest  num_flights
   &lt;chr&gt;       &lt;int&gt;
 1 LEX             1
 2 LGA             1
 3 ANC             8
 4 SBN            10
 5 HDN            15
 6 MTJ            15
 7 EYW            17
 8 PSP            19
 9 JAC            25
10 BZN            36
# ... with 95 more rows</code></pre>
<p>This is actually giving us the opposite of what we are looking for. It tells us the least frequent destination airports first. To switch the ordering to be descending instead of ascending we use the <code>desc</code> (<code>desc</code>ending) function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">freq_dest <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num_flights))</code></pre></div>
<pre><code># A tibble: 105 x 2
   dest  num_flights
   &lt;chr&gt;       &lt;int&gt;
 1 ORD         17283
 2 ATL         17215
 3 LAX         16174
 4 BOS         15508
 5 MCO         14082
 6 CLT         14064
 7 SFO         13331
 8 FLL         12055
 9 MIA         11728
10 DCA          9705
# ... with 95 more rows</code></pre>
<hr />
<!--Section on joins-->
</div>
<div id="joins" class="section level2">
<h2><span class="header-section-number">5.8</span> Joining data frames</h2>
<p>Another common task is joining AKA merging two different datasets. For example, in the <code>flights</code> data, the variable <code>carrier</code> lists the carrier code for the different flights. While <code>&quot;UA&quot;</code> and <code>&quot;AA&quot;</code> might be somewhat easy to guess for some (United and American Airlines), what are “VX”, “HA”, and “B6”? This information is provided in a separate data frame <code>airlines</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(airlines)</code></pre></div>
<p>We see that in <code>airports</code>, <code>carrier</code> is the carrier code while <code>name</code> is the full name of the airline. Using this table, we can see that “VX”, “HA”, and “B6” correspond to Virgin America, Hawaiian Airlines, and JetBlue respectively. However, will we have to continually look up the carrier’s name for each flight in the <code>airlines</code> dataset? No! Instead of having to do this manually, we can have R automatically do the “looking up” for us.</p>
<p>Note that the values in the variable <code>carrier</code> in <code>flights</code> match the values in the variable <code>carrier</code> in <code>airlines</code>. In this case, we can use the variable <code>carrier</code> as a <em>key variable</em> to join/merge/match the two data frames by. Key variables are almost always identification variables that uniquely identify the observational units as we saw back in Subsetion <a href="4-tidy.html#identification-vs-measurement">4.2.2</a> on identification vs measurement variables. This ensures that rows in both data frames are appropriate matched during the join. Hadley and Garrett <span class="citation">(Grolemund and Wickham 2016)</span> created the following diagram to help us understand how the different datasets are linked by various key variables:</p>
<div class="figure" style="text-align: center"><span id="fig:reldiagram"></span>
<img src="images/relational-nycflights.png" alt="Data relationships in nycflights13 from R for Data Science" width="\textwidth" />
<p class="caption">
Figure 5.7: Data relationships in nycflights13 from R for Data Science
</p>
</div>
<div id="joining-by-key-variables" class="section level3">
<h3><span class="header-section-number">5.8.1</span> Joining by “key” variables</h3>
<p>In both <code>flights</code> and <code>airlines</code>, the key variable we want to join/merge/match the two data frames with has the same name in both datasets: <code>carriers</code>. We make use of the <code>inner_join()</code> function to join by the variable <code>carrier</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_joined &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(airlines, <span class="dt">by =</span> <span class="st">&quot;carrier&quot;</span>)
<span class="kw">View</span>(flights)
<span class="kw">View</span>(flights_joined)</code></pre></div>
<p>We observed that the <code>flights</code> and <code>flights_joined</code> are identical except that <code>flights_joined</code> has an additional variable <code>name</code> whose values were drawn from <code>airlines</code>.</p>
<p>A visual representation of the <code>inner_join</code> is given below <span class="citation">(Grolemund and Wickham 2016)</span>:</p>
<div class="figure" style="text-align: center"><span id="fig:ijdiagram"></span>
<img src="images/join-inner.png" alt="Diagram of inner join from R for Data Science" width="\textwidth" />
<p class="caption">
Figure 5.8: Diagram of inner join from R for Data Science
</p>
</div>
<p>There are more complex joins available, but the <code>inner_join</code> will solve nearly all of the problems you’ll face in our experience.</p>
</div>
<div id="joining-by-key-variables-with-different-names" class="section level3">
<h3><span class="header-section-number">5.8.2</span> Joining by “key” variables with different names</h3>
<p>Say instead, you are interested in all the destinations of flights from NYC in 2013 and ask yourself:</p>
<ul>
<li>“What cities are these airports in?”</li>
<li>“Is <code>&quot;ORD&quot;</code> Orlando?”</li>
<li>“Where is <code>&quot;FLL&quot;</code>?</li>
</ul>
<p>The <code>airports</code> data frame contains airport codes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(airports)</code></pre></div>
<p>However, looking at both the <code>airports</code> and <code>flights</code> and the visual representation of the relations between the data frames in Figure <a href="5-wrangling.html#fig:ijdiagram">5.8</a>, we see that in:</p>
<ul>
<li><code>airports</code> the airport code is in the variable <code>faa</code></li>
<li><code>flights</code> the airport code is in the variable <code>origin</code></li>
</ul>
<p>So to join these two datasets, our <code>inner_join</code> operation involves a <code>by</code> argument that accounts for the different names:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>))</code></pre></div>
<p>Let’s construct the sequence of commands that computes the number of flights from NYC to each destination, but also includes information about each destination airport:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">named_dests &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num_flights =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num_flights)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">inner_join</span>(airports, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;dest&quot;</span> =<span class="st"> &quot;faa&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">airport_name =</span> name)
named_dests</code></pre></div>
<pre><code># A tibble: 101 x 9
   dest  num_flights airport_name         lat    lon   alt    tz dst   tzone   
   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;              &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
 1 ORD         17283 Chicago Ohare Intl  42.0  -87.9   668    -6 A     America…
 2 ATL         17215 Hartsfield Jackso…  33.6  -84.4  1026    -5 A     America…
 3 LAX         16174 Los Angeles Intl    33.9 -118.    126    -8 A     America…
 4 BOS         15508 General Edward La…  42.4  -71.0    19    -5 A     America…
 5 MCO         14082 Orlando Intl        28.4  -81.3    96    -5 A     America…
 6 CLT         14064 Charlotte Douglas…  35.2  -80.9   748    -5 A     America…
 7 SFO         13331 San Francisco Intl  37.6 -122.     13    -8 A     America…
 8 FLL         12055 Fort Lauderdale H…  26.1  -80.2     9    -5 A     America…
 9 MIA         11728 Miami Intl          25.8  -80.3     8    -5 A     America…
10 DCA          9705 Ronald Reagan Was…  38.9  -77.0    15    -5 A     America…
# ... with 91 more rows</code></pre>
<p>In case you didn’t know, <code>&quot;ORD&quot;</code> is the airport code of Chicago O’Hare airport and <code>&quot;FLL&quot;</code> is the main airport in Fort Lauderdale, Florida, which we can now see in our <code>named_dests</code> data frame.</p>
</div>
<div id="joining-by-multiple-key-variables" class="section level3">
<h3><span class="header-section-number">5.8.3</span> Joining by multiple “key” variables</h3>
<p>Say instead we are in a situation where we need to join by multiple varibles. For example, in Figure <a href="5-wrangling.html#fig:reldiagram">5.7</a> above we see that in order to join the <code>flights</code> and <code>weather</code> data frames, we need more than one key variable: <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, and <code>origin</code>. This is because the combination of these 5 variables act to uniquely identify each observational unit in the <code>weather</code> data frame: hourly weather recordings at each of the 3 NYC airports.</p>
<p>We achieve this by specifying a vector of key variables to join by using the <code>c()</code> concatenate function. Note the individual variables need to be wrapped in quotation marks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_weather_joined &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">inner_join</span>(weather, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;hour&quot;</span>, <span class="st">&quot;origin&quot;</span>))
flights_weather_joined</code></pre></div>
<pre><code># A tibble: 335,220 x 32
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      542            540         2      923            850
 4  2013     1     1      544            545        -1     1004           1022
 5  2013     1     1      554            600        -6      812            837
 6  2013     1     1      554            558        -4      740            728
 7  2013     1     1      555            600        -5      913            854
 8  2013     1     1      557            600        -3      709            723
 9  2013     1     1      557            600        -3      838            846
10  2013     1     1      558            600        -2      753            745
# ... with 335,210 more rows, and 24 more variables: arr_delay &lt;dbl&gt;,
#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
#   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
#   time_hour.x &lt;dttm&gt;, gain &lt;dbl&gt;, hours &lt;dbl&gt;, gain_per_hour &lt;dbl&gt;,
#   temp &lt;dbl&gt;, dewp &lt;dbl&gt;, humid &lt;dbl&gt;, wind_dir &lt;dbl&gt;, wind_speed &lt;dbl&gt;,
#   wind_gust &lt;dbl&gt;, precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;,
#   time_hour.y &lt;dttm&gt;</code></pre>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC5.13)</strong> Looking at Figure <a href="5-wrangling.html#fig:reldiagram">5.7</a>, when joining <code>flights</code> and <code>weather</code> (or, in other words, matching the hourly weather values with each flight), why do we need to join by all of <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, and <code>origin</code>, and not just <code>hour</code>?</p>
<p><strong>(LC5.14)</strong> What surprises you about the top 10 destinations from NYC in 2013?</p>
<p><strong>Learning Check Solutions</strong></p>
<p><strong>(LC5.13)</strong> Looking at Figure <a href="5-wrangling.html#fig:reldiagram">5.7</a>, when joining <code>flights</code> and <code>weather</code> (or, in other words, matching the hourly weather values with each flight), why do we need to join by all of <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, and <code>origin</code>, and not just <code>hour</code>?<br />
Because <code>hour</code> is simply a value between 0 and 23; to identify a <em>specific</em> hour, we need to know which year, month, day and at which airport.</p>
<p><strong>(LC5.14)</strong> What surprises you about the top 10 destinations from NYC in 2013?<br />
This question is subjective! What surprises me is the high number of flights to Boston. Wouldn’t it be easier and quicker to take the train?</p>
<div class="learncheck">

</div>
<hr />
<!--Subsection on Other Verbs -->
</div>
</div>
<div id="other-verbs" class="section level2">
<h2><span class="header-section-number">5.9</span> Other verbs</h2>
<p>On top of the following examples of other verbs, if you’d like to see more examples on using <code>dplyr</code>, the 5MV, and <code>%&gt;%</code> with the <code>nycflights13</code> dataset, check out <a href="http://r4ds.had.co.nz/transform.html">Chapter 5</a> of Hadley and Garrett’s book <span class="citation">(Grolemund and Wickham 2016)</span>.</p>
<div id="select" class="section level3">
<h3><span class="header-section-number">5.9.1</span> Select variables using select</h3>
<div class="figure" style="text-align: center"><span id="fig:selectfig"></span>
<img src="images/select.png" alt="Select diagram from Data Wrangling with dplyr and tidyr cheatsheet" width="\textwidth" />
<p class="caption">
Figure 5.9: Select diagram from Data Wrangling with dplyr and tidyr cheatsheet
</p>
</div>
<p>We’ve seen that the <code>flights</code> data frame in the <code>nycflights13</code> package contains many different variables. The <code>names</code> function gives a listing of all the columns in a data frame; in our case you would run <code>names(flights)</code>. You can also identify these variables by running the <code>glimpse</code> function in the <code>dplyr</code> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(flights)</code></pre></div>
<p>However, say you only want to consider two of these variables, say <code>carrier</code> and <code>flight</code>. You can <code>select</code> these:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, flight)</code></pre></div>
<p>This function makes navigating datasets with a very large number of variables easier for humans by restricting consideration to only those of interest, like <code>carrier</code> and <code>flight</code> above. So for example, this might make viewing the dataset using the <code>View()</code> spreadsheet viewer more digestible. However, as far as the computer is concerned it doesn’t care how many variables additional variables are in the dataset in question, so long as <code>carrier</code> and <code>flight</code> are included.</p>
<p>Another example involves the variable <code>year</code>. If you remember the original description of the <code>flights</code> data frame (or by running <code>?flights</code>), you’ll remember that this data correspond to flights in 2013 departing New York City. The <code>year</code> variable isn’t really a variable here in that it doesn’t vary… <code>flights</code> actually comes from a larger dataset that covers many years. We may want to remove the <code>year</code> variable from our dataset since it won’t be helpful for analysis in this case. We can deselect <code>year</code> by using the <code>-</code> sign:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_no_year &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>year)
<span class="kw">names</span>(flights_no_year)</code></pre></div>
<p>Or we could specify a ranges of columns:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flight_arr_times &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(month<span class="op">:</span>day, arr_time<span class="op">:</span>sched_arr_time)
flight_arr_times</code></pre></div>
<p>The <code>select</code> function can also be used to reorder columns in combination with the <code>everything</code> helper function. Let’s suppose we’d like the <code>hour</code>, <code>minute</code>, and <code>time_hour</code> variables, which appear at the end of the <code>flights</code> dataset, to actually appear immediately after the <code>day</code> variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_reorder &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(month<span class="op">:</span>day, hour<span class="op">:</span>time_hour, <span class="kw">everything</span>())
<span class="kw">names</span>(flights_reorder)</code></pre></div>
<p>in this case <code>everything()</code> picks up all remaining variables. Lastly, the helper functions <code>starts_with</code>, <code>ends_with</code>, and <code>contains</code> can be used to choose column names that match those conditions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_begin_a &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;a&quot;</span>))
flights_begin_a</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_delays &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">ends_with</span>(<span class="st">&quot;delay&quot;</span>))
flights_delays</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_time &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;time&quot;</span>))
flights_time</code></pre></div>
</div>
<div id="rename" class="section level3">
<h3><span class="header-section-number">5.9.2</span> Rename variables using rename</h3>
<p>Another useful function is <code>rename</code>, which as you may suspect renames one column to another name. Suppose we wanted <code>dep_time</code> and <code>arr_time</code> to be <code>departure_time</code> and <code>arrival_time</code> instead in the <code>flights_time</code> data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights_time_new &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;time&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">departure_time =</span> dep_time,
         <span class="dt">arrival_time =</span> arr_time)
<span class="kw">names</span>(flights_time)</code></pre></div>
<p>Note that in this case we used a single <code>=</code> sign with the <code>rename()</code>. Ex: <code>departure_time = dep_time</code>. This is because we are not testing for equality like we would using <code>==</code>, but instead we want to assign a new variable <code>departure_time</code> to have the same values as <code>dep_time</code> and then delete the variable <code>dep_time</code>.</p>
<p>It’s easy to forget if the new name comes before or after the equals sign. I usually remember this as “New Before, Old After” or NBOA. You’ll receive an error if you try to do it the other way:</p>
<pre><code>Error: Unknown variables: departure_time, arrival_time.</code></pre>
</div>
<div id="find-the-top-number-of-values-using-top_n" class="section level3">
<h3><span class="header-section-number">5.9.3</span> Find the top number of values using top_n</h3>
<p>We can also use the <code>top_n</code> function which automatically tells us the most frequent <code>num_flights</code>. We specify the top 10 airports here:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">named_dests <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">wt =</span> num_flights)</code></pre></div>
<p>We’ll still need to arrange this by <code>num_flights</code> though:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">named_dests  <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">wt =</span> num_flights) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num_flights))</code></pre></div>
<p><strong>Note:</strong> Remember that I didn’t pull the <code>n</code> and <code>wt</code> arguments out of thin air. They can be found by using the <code>?</code> function on <code>top_n</code>.</p>
<p>We can go one stop further and tie together the <code>group_by</code> and <code>summarize</code> functions we used to find the most frequent flights:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ten_freq_dests &lt;-<span class="st"> </span>flights <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(dest) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">num_flights =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(num_flights)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dt">n =</span> <span class="dv">10</span>) 
<span class="kw">View</span>(ten_freq_dests)</code></pre></div>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC5.15)</strong> What are some ways to select all three of the <code>dest</code>, <code>air_time</code>, and <code>distance</code> variables from <code>flights</code>? Give the code showing how to do this in at least three different ways.</p>
<p><strong>(LC5.16)</strong> How could one use <code>starts_with</code>, <code>ends_with</code>, and <code>contains</code> to select columns from the <code>flights</code> data frame? Provide three different examples in total: one for <code>starts_with</code>, one for <code>ends_with</code>, and one for <code>contains</code>.</p>
<p><strong>(LC5.17)</strong> Why might we want to use the <code>select</code> function on a data frame?</p>
<p><strong>(LC5.18)</strong> Create a new data frame that shows the top 5 airports with the largest arrival delays from NYC in 2013.</p>
<p><strong>Learning Check Solutions</strong></p>
<p><strong>(LC5.15)</strong> What are some ways to select all three of the <code>dest</code>, <code>air_time</code>, and <code>distance</code> variables from <code>flights</code>? Give the code showing how to do this in at least three different ways.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(nycflights13)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The regular way:</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(dest, air_time, distance)</code></pre></div>
<pre><code># A tibble: 336,776 x 3
   dest  air_time distance
   &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1 IAH        227     1400
 2 IAH        227     1416
 3 MIA        160     1089
 4 BQN        183     1576
 5 ATL        116      762
 6 ORD        150      719
 7 FLL        158     1065
 8 IAD         53      229
 9 MCO        140      944
10 ORD        138      733
# ... with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Since they are sequential columns in the dataset</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(dest<span class="op">:</span>distance)</code></pre></div>
<pre><code># A tibble: 336,776 x 3
   dest  air_time distance
   &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1 IAH        227     1400
 2 IAH        227     1416
 3 MIA        160     1089
 4 BQN        183     1576
 5 ATL        116      762
 6 ORD        150      719
 7 FLL        158     1065
 8 IAD         53      229
 9 MCO        140      944
10 ORD        138      733
# ... with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Not as effective, by removing everything else</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>year, <span class="op">-</span>month, <span class="op">-</span>day, <span class="op">-</span>dep_time, <span class="op">-</span>sched_dep_time, <span class="op">-</span>dep_delay, <span class="op">-</span>arr_time,
         <span class="op">-</span>sched_arr_time, <span class="op">-</span>arr_delay, <span class="op">-</span>carrier, <span class="op">-</span>flight, <span class="op">-</span>tailnum, <span class="op">-</span>origin, 
         <span class="op">-</span>hour, <span class="op">-</span>minute, <span class="op">-</span>time_hour)</code></pre></div>
<pre><code># A tibble: 336,776 x 6
   dest  air_time distance  gain hours gain_per_hour
   &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;
 1 IAH        227     1400    -9 3.78          -2.38
 2 IAH        227     1416   -16 3.78          -4.23
 3 MIA        160     1089   -31 2.67         -11.6 
 4 BQN        183     1576    17 3.05           5.57
 5 ATL        116      762    19 1.93           9.83
 6 ORD        150      719   -16 2.5           -6.4 
 7 FLL        158     1065   -24 2.63          -9.11
 8 IAD         53      229    11 0.883         12.5 
 9 MCO        140      944     5 2.33           2.14
10 ORD        138      733   -10 2.3           -4.35
# ... with 336,766 more rows</code></pre>
<p><strong>(LC5.17)</strong> Why might we want to use the <code>select</code> function on a data frame?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Anything that starts with &quot;d&quot;</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;d&quot;</span>))</code></pre></div>
<pre><code># A tibble: 336,776 x 5
     day dep_time dep_delay dest  distance
   &lt;int&gt;    &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
 1     1      517         2 IAH       1400
 2     1      533         4 IAH       1416
 3     1      542         2 MIA       1089
 4     1      544        -1 BQN       1576
 5     1      554        -6 ATL        762
 6     1      554        -4 ORD        719
 7     1      555        -5 FLL       1065
 8     1      557        -3 IAD        229
 9     1      557        -3 MCO        944
10     1      558        -2 ORD        733
# ... with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Anything related to delays:</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">ends_with</span>(<span class="st">&quot;delay&quot;</span>))</code></pre></div>
<pre><code># A tibble: 336,776 x 2
   dep_delay arr_delay
       &lt;dbl&gt;     &lt;dbl&gt;
 1         2        11
 2         4        20
 3         2        33
 4        -1       -18
 5        -6       -25
 6        -4        12
 7        -5        19
 8        -3       -14
 9        -3        -8
10        -2         8
# ... with 336,766 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Anything related to departures:</span>
flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;dep&quot;</span>))</code></pre></div>
<pre><code># A tibble: 336,776 x 3
   dep_time sched_dep_time dep_delay
      &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;
 1      517            515         2
 2      533            529         4
 3      542            540         2
 4      544            545        -1
 5      554            600        -6
 6      554            558        -4
 7      555            600        -5
 8      557            600        -3
 9      557            600        -3
10      558            600        -2
# ... with 336,766 more rows</code></pre>
<p><strong>(LC5.17)</strong> Create a new data frame that shows the top 5 airports with the largest arrival delays from NYC in 2013. To narrow down the data frame, to make it easier to look at. Using <code>View()</code> for example.</p>
<div class="learncheck">

</div>
<hr />
<!--Subsection on Conclusion -->
</div>
</div>
<div id="conclusion-3" class="section level2">
<h2><span class="header-section-number">5.10</span> Conclusion</h2>
<div id="putting-it-all-together-available-seat-miles" class="section level3">
<h3><span class="header-section-number">5.10.1</span> Putting it all together: Available seat miles</h3>
<p>Let’s recap the Five Main Verbs (5MV) and others in Table <a href="5-wrangling.html#tab:wrangle-summary-table">5.1</a> summarizing their differences. Using these verbs and the pipe <code>%&gt;%</code> operator from Section <a href="5-wrangling.html#piping">5.1</a>, you’ll be able to write easily legible code to perform almost all the data wrangling necessary for the rest of this book.</p>
<table>
<caption><span id="tab:wrangle-summary-table">Table 5.1: </span>Summary of data wrangling verbs</caption>
<thead>
<tr class="header">
<th></th>
<th align="left">Verb</th>
<th align="left">Data wrangling operation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td align="left"><code>filter()</code></td>
<td align="left">Pick out a subset of rows</td>
</tr>
<tr class="even">
<td>2</td>
<td align="left"><code>summarize()</code></td>
<td align="left">Summarize many values to one using a summary statistic function like <code>mean()</code>, <code>median()</code>, etc.</td>
</tr>
<tr class="odd">
<td>3</td>
<td align="left"><code>group_by()</code></td>
<td align="left">Add grouping structure to rows in data frame. Note this does not change values in data frame.</td>
</tr>
<tr class="even">
<td>4</td>
<td align="left"><code>mutate()</code></td>
<td align="left">Create new variables by mutating existing ones</td>
</tr>
<tr class="odd">
<td>5</td>
<td align="left"><code>arrange()</code></td>
<td align="left">Arrange rows of a data variable in ascending (default) or <code>desc</code>ending order</td>
</tr>
<tr class="even">
<td>6</td>
<td align="left"><code>inner_join()</code></td>
<td align="left">Join/merge two data frames, matching rows by a key variable</td>
</tr>
<tr class="odd">
<td>7</td>
<td align="left"><code>select()</code></td>
<td align="left">Pick out a subset of columns to make data frames easier to view</td>
</tr>
</tbody>
</table>
<p>Let’s now put your newly acquired data wrangling skills to the test! An airline industry measure of a passenger airline’s capacity is the <a href="https://en.wikipedia.org/wiki/Available_seat_miles">available seat miles</a>, which is equal to the number of seats available multiplied by the number of miles or kilometres flown. So for example say an airline had 2 flights using a plane with 10 seats that flew 500 miles and 3 flights using a plane with 20 seats that flew 1000 miles, the available seat miles would be 2 <span class="math inline">\(\times\)</span> 10 <span class="math inline">\(\times\)</span> 500 <span class="math inline">\(+\)</span> 3 <span class="math inline">\(\times\)</span> 20 <span class="math inline">\(\times\)</span> 1000 = 70,000 seat miles.</p>
<div class="learncheck">
<p>
<strong><em>Learning check</em></strong>
</p>
</div>
<p><strong>(LC5.19)</strong> Using the datasets included in the <code>nycflights13</code> package, compute the available seat miles for each airline sorted in descending order. After completing all the necessary data wrangling steps, the resulting data frame should have 16 rows (one for each airline) and 2 columns (airline name and available seat miles). Here are some hints:</p>
<ol style="list-style-type: decimal">
<li><strong>Crucial</strong>: Unless you are very confident in what you are doing, it is worthwhile to not starting coding right away, but rather first sketch out on paper all the necessary data wrangling steps not using exact code, but rather high-level <em>pseudocode</em> that is informal yet detailed enough to articulate what you are doing. This way you won’t confuse <em>what</em> you are trying to do (the algorithm) with <em>how</em> you are going to do it (writing <code>dplyr</code> code).</li>
<li>Take a close look at all the datasets using the <code>View()</code> function: <code>flights</code>, <code>weather</code>, <code>planes</code>, <code>airports</code>, and <code>airlines</code> to identify which variables are necessary to compute available seat miles.</li>
<li>Figure <a href="5-wrangling.html#fig:reldiagram">5.7</a> above showing how the various datasets can be joined will also be useful.</li>
<li>Consider the data wrangling verbs in Table <a href="5-wrangling.html#tab:wrangle-summary-table">5.1</a> as your toolbox!</li>
</ol>
<p><strong>Learning Check Solutions</strong></p>
<p><strong>(LC5.19)</strong> Here are some examples of student-written <a href="https://twitter.com/rudeboybert/status/964181298691629056">pseudocode</a>. Based on our own pseudocode, let’s first display the entire solution.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, seats, distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ASM =</span> seats <span class="op">*</span><span class="st"> </span>distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">ASM =</span> <span class="kw">sum</span>(ASM, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(ASM))</code></pre></div>
<pre><code># A tibble: 16 x 2
   carrier         ASM
   &lt;chr&gt;         &lt;dbl&gt;
 1 UA      15516377526
 2 DL      10532885801
 3 B6       9618222135
 4 AA       3677292231
 5 US       2533505829
 6 VX       2296680778
 7 EV       1817236275
 8 WN       1718116857
 9 9E        776970310
10 HA        642478122
11 AS        314104736
12 FL        219628520
13 F9        184832280
14 YV         20163632
15 MQ          7162420
16 OO          1299835</code></pre>
<p>Let’s now break this down step-by-step. To compute the available seat miles for a given flight, we need the <code>distance</code> variable from the <code>flights</code> data frame and the <code>seats</code> variable from the <code>planes</code> data frame, necessitating a join by the key variable <code>tailnum</code> as illustrated in Figure <a href="5-wrangling.html#fig:reldiagram">5.7</a>. To keep the resulting data frame easy to view, we’ll <code>select()</code> only these two variables and <code>carrier</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, seats, distance)</code></pre></div>
<pre><code># A tibble: 284,170 x 3
   carrier seats distance
   &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt;
 1 UA        149     1400
 2 UA        149     1416
 3 AA        178     1089
 4 B6        200     1576
 5 DL        178      762
 6 UA        191      719
 7 B6        200     1065
 8 EV         55      229
 9 B6        200      944
10 B6        200     1028
# ... with 284,160 more rows</code></pre>
<p>Now for each flight we can compute the available seat miles <code>ASM</code> by multiplying the number of seats by the distance via a <code>mutate()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, seats, distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Added:</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ASM =</span> seats <span class="op">*</span><span class="st"> </span>distance)</code></pre></div>
<pre><code># A tibble: 284,170 x 4
   carrier seats distance    ASM
   &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;
 1 UA        149     1400 208600
 2 UA        149     1416 210984
 3 AA        178     1089 193842
 4 B6        200     1576 315200
 5 DL        178      762 135636
 6 UA        191      719 137329
 7 B6        200     1065 213000
 8 EV         55      229  12595
 9 B6        200      944 188800
10 B6        200     1028 205600
# ... with 284,160 more rows</code></pre>
<p>Next we want to sum the <code>ASM</code> for each carrier. We achieve this by first grouping by <code>carrier</code> and then summarizing using the <code>sum()</code> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, seats, distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ASM =</span> seats <span class="op">*</span><span class="st"> </span>distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Added:</span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">ASM =</span> <span class="kw">sum</span>(ASM))</code></pre></div>
<pre><code># A tibble: 16 x 2
   carrier         ASM
   &lt;chr&gt;         &lt;dbl&gt;
 1 9E        776970310
 2 AA       3677292231
 3 AS        314104736
 4 B6       9618222135
 5 DL      10532885801
 6 EV       1817236275
 7 F9        184832280
 8 FL        219628520
 9 HA        642478122
10 MQ          7162420
11 OO          1299835
12 UA      15516377526
13 US       2533505829
14 VX       2296680778
15 WN       1718116857
16 YV         20163632</code></pre>
<p>However, because for certain carriers certain flights have missing <code>NA</code> values, the resulting table also returns <code>NA</code>’s. We can eliminate these by adding a <code>na.rm = TRUE</code> argument to <code>sum()</code>, telling R that we want to remove the <code>NA</code>’s in the sum. We saw this in Section (summarize):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, seats, distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ASM =</span> seats <span class="op">*</span><span class="st"> </span>distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Modified:</span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">ASM =</span> <span class="kw">sum</span>(ASM, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<pre><code># A tibble: 16 x 2
   carrier         ASM
   &lt;chr&gt;         &lt;dbl&gt;
 1 9E        776970310
 2 AA       3677292231
 3 AS        314104736
 4 B6       9618222135
 5 DL      10532885801
 6 EV       1817236275
 7 F9        184832280
 8 FL        219628520
 9 HA        642478122
10 MQ          7162420
11 OO          1299835
12 UA      15516377526
13 US       2533505829
14 VX       2296680778
15 WN       1718116857
16 YV         20163632</code></pre>
<p>Finally, we <code>arrange()</code> the data in <code>desc()</code>ending order of <code>ASM</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, seats, distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ASM =</span> seats <span class="op">*</span><span class="st"> </span>distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">ASM =</span> <span class="kw">sum</span>(ASM, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Added:</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(ASM))</code></pre></div>
<pre><code># A tibble: 16 x 2
   carrier         ASM
   &lt;chr&gt;         &lt;dbl&gt;
 1 UA      15516377526
 2 DL      10532885801
 3 B6       9618222135
 4 AA       3677292231
 5 US       2533505829
 6 VX       2296680778
 7 EV       1817236275
 8 WN       1718116857
 9 9E        776970310
10 HA        642478122
11 AS        314104736
12 FL        219628520
13 F9        184832280
14 YV         20163632
15 MQ          7162420
16 OO          1299835</code></pre>
<p>While the above data frame is correct, the IATA <code>carrier</code> code is not always useful. For example, what carrier is <code>WN</code>? We can address this by joining with the <code>airlines</code> dataset using <code>carrier</code> is the key variable. While this step is not absolutely required, it goes a long way to making the table easier to make sense of. It is important to be empathetic with the ultimate consumers of your presented data!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">flights <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">inner_join</span>(planes, <span class="dt">by =</span> <span class="st">&quot;tailnum&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(carrier, seats, distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ASM =</span> seats <span class="op">*</span><span class="st"> </span>distance) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(carrier) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">ASM =</span> <span class="kw">sum</span>(ASM, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(ASM)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="co"># Added:</span>
<span class="st">  </span><span class="kw">inner_join</span>(airlines, <span class="dt">by =</span> <span class="st">&quot;carrier&quot;</span>)</code></pre></div>
<pre><code># A tibble: 16 x 3
   carrier         ASM name                       
   &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;                      
 1 UA      15516377526 United Air Lines Inc.      
 2 DL      10532885801 Delta Air Lines Inc.       
 3 B6       9618222135 JetBlue Airways            
 4 AA       3677292231 American Airlines Inc.     
 5 US       2533505829 US Airways Inc.            
 6 VX       2296680778 Virgin America             
 7 EV       1817236275 ExpressJet Airlines Inc.   
 8 WN       1718116857 Southwest Airlines Co.     
 9 9E        776970310 Endeavor Air Inc.          
10 HA        642478122 Hawaiian Airlines Inc.     
11 AS        314104736 Alaska Airlines Inc.       
12 FL        219628520 AirTran Airways Corporation
13 F9        184832280 Frontier Airlines Inc.     
14 YV         20163632 Mesa Airlines Inc.         
15 MQ          7162420 Envoy Air                  
16 OO          1299835 SkyWest Airlines Inc.      </code></pre>
<div class="learncheck">

</div>
</div>
<div id="review-questions-2" class="section level3">
<h3><span class="header-section-number">5.10.2</span> Review questions</h3>
<p>Review questions have been designed using the <code>fivethirtyeight</code> R package <span class="citation">(Kim, Ismay, and Chunn 2018)</span> with links to the corresponding FiveThirtyEight.com articles in our free DataCamp course <strong>Effective Data Storytelling using the <code>tidyverse</code></strong>. The material in this chapter is covered in the chapters of the DataCamp course available below:</p>
<ul>
<li><a href="https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse-free/17585?ex=1">Filtering, Grouping, &amp; Summarizing</a></li>
<li><a href="https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse-free/17586?ex=1">dplyr Review</a></li>
</ul>
</div>
<div id="whats-to-come-3" class="section level3">
<h3><span class="header-section-number">5.10.3</span> What’s to come?</h3>
<p>Congratulations! We’ve completed the “data science” portion of this book! We’ll now move to the “data modeling” portion in Chapters <a href="6-regression.html#regression">6</a> and <a href="7-multiple-regression.html#multiple-regression">7</a>, where you’ll leverage your data visualization and wrangling skills to model the <em>relationships</em> between different variables of datasets. However, we’re going to leave “Inference for Regression” (Chapter <a href="11-inference-for-regression.html#inference-for-regression">11</a>) until later.</p>
<center>
<img src="images/flowcharts/flowchart/flowchart.005.png" title="ModernDive flowchart" width="800"/>
</center>
</div>
<div id="resources-1" class="section level3">
<h3><span class="header-section-number">5.10.4</span> Resources</h3>
<p>As we saw with the RStudio cheatsheet on <a href="https://www.rstudio.com/wp-content/uploads/2016/11/ggplot2-cheatsheet-2.1.pdf">data visualization</a>, RStudio has also created a cheatsheet for data wrangling entitled <a href="https://github.com/rstudio/cheatsheets/raw/master/source/pdfs/data-transformation-cheatsheet.pdf">“Data Transformation with dplyr”</a>.</p>
<!--
* By clicking [here](https://github.com/rstudio/cheatsheets/raw/master/source/pdfs/data-transformation-cheatsheet.pdf)
* Or by clicking the RStudio Menu Bar -> Help -> Cheatsheets -> "Data Manipulation with `dplyr`, `tidyr`"
(The RStudio interface has not been updated to include JUST the dplyr cheatsheet)

We will focus only on the `dplyr` functions in this book, but you are encouraged to also explore `tidyr` if you are presented with data that is not in the tidy format that we have specified as the preferred option for our purposes.
-->
</div>
<div id="script-of-r-code-2" class="section level3">
<h3><span class="header-section-number">5.10.5</span> Script of R code</h3>
<p>An R script file of all R code used in this chapter is available <a href="https://moderndive.netlify.com/scripts/05-wrangling.R">here</a>.</p>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="4-tidy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="6-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/moderndive/moderndive_book/edit/master/05-wrangling.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
